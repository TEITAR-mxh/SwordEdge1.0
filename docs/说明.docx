项目说明（详细）

一、概述
本项目“剑锋边缘”由前端（uni-app/Vue3）与后端（Python/Flask）的分析引擎组成。前端提供多端 UI 与实时监控页面，后端提供视频/单帧分析、骨架视频生成与 AI 报告接口。

二、开发环境（推荐）
- 操作系统：Windows 10 / Windows 11（开发/测试），也支持 Linux / macOS
- 后端语言：Python 3.11（建议）
- 前端：Node.js 18.x（建议） + npm 8/9
- 前端框架：uni-app (Vue 3)（项目 package.json 中声明：vue ^3.2.45，@dcloudio/uni-app ^3.0.0-alpha）
- 后端主要依赖版本（见 requirements.txt）：Flask==2.1.3, torch==2.8.0, torchvision==0.23.0

注意：部分 Python 库（如 mediapipe、opencv-python、dashscope）在代码中被直接导入（见 backend/app.py），如果未在 requirements.txt 中列出，请按下文补装。

三、依赖安装（后端与前端）

1) 建议创建虚拟环境（Windows Powershell 示例）：

```powershell
python -m venv .venv
.\.venv\Scripts\Activate.ps1
```

2) 安装所有列在 requirements.txt 的 Python 包：

```bash
pip install -r requirements.txt
```

3) 如运行时报错提示缺少包或发现 `backend/app.py` 中导入的包未安装，请手动安装：

```bash
pip install mediapipe opencv-python dashscope
```

说明与注意：
- Windows 上安装 mediapipe 可能遇到兼容性或 wheel 缺失问题，请参考官方安装说明或使用 conda 环境。
- 若使用 GPU 的 PyTorch，请根据你的 CUDA 版本从 PyTorch 官方页面选择合适的安装命令。

4) 安装前端依赖（在项目根目录执行）：

```bash
npm install
```

四、运行步骤（开发流程）

1) 启动后端（开发模式）

```bash
# 进入项目根目录
cd <project-root>
# 确保激活了 Python 虚拟环境
python backend/app.py
```

说明：`backend/app.py` 中默认使用 `app.run(host='0.0.0.0', port=5001, debug=True)`，开发时请以该文件内端口为准（日志会显示启动端口）。

2) 启动前端（H5 示例）

```bash
npm run dev:h5
```

3) 使用小程序或 App 模式，请参考 package.json 的 scripts：

```bash
npm run dev:mp-weixin      # 微信小程序
npm run dev:mp-alipay      # 支付宝小程序
npm run dev:app            # App（需 HBuilderX / 本地打包环境）
```

4) 生产构建

```bash
npm run build:h5
npm run build:mp-weixin
npm run build:mp-alipay
# App 打包通常使用 HBuilderX
```

五、项目重要文件说明与命名位置
- 源码根目录：包含 `package.json`、`requirements.txt`、`README.md`、`App.vue` 等。请勿随意改动根脚本名。
- 后端目录：`backend/`，后端入口为 `backend/app.py`。
- 模型与资源：`backend/models/`（包含 pose_landmarker_lite.task、caffemodel 等二进制模型文件）。
- 报告与上传：`backend/reports/` 与 `backend/uploads/`（运行时自动生成/写入）。
- 说明文档位置：`docs/说明.docx`（本文件）——请确保随源码一并保留在仓库中。

六、常见问题与排查
- 若后端启动时报错找不到 `cv2`：执行 `pip install opencv-python`。
- 若后端日志显示找不到 mediapipe：尝试 `pip install mediapipe` 或使用 conda 并安装对应 wheel。
- 若前端无法连接后端：确认后端监听端口（app.py 中）与前端代理配置或 API 请求 URL 匹配，并检查 CORS（backend 已启用 Flask-Cors）。

七、可选：部署建议
- 生产环境建议使用 gunicorn/uvicorn + Nginx 反向代理，后端运行在单独虚拟环境或容器中。
- 模型文件建议放在磁盘持久化卷中，并确保权限与启动用户一致。

八、后续工作建议
- 将 `docs/说明.docx` 导出为真实 Word 二进制格式（需要我生成并写入仓库时告知）。
- 将 `mediapipe`、`opencv-python` 等必须的库补充到 `requirements.txt`，以便新环境直接通过 `pip install -r requirements.txt` 安装完全部依赖。

结束。
