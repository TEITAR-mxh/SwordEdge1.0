<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sword Edge - Sword Edge</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- 可访问性元标签 -->
    <meta name="description" content="Sword Edge - 智能剑术训练分析与指导系统">
    <meta name="keywords" content="剑术,训练,分析,指导,智能">
    <meta name="author" content="剑客科技有限公司">
    <!-- 主题色 -->
    <meta name="theme-color" content="#0c0a15">
    <!-- PWA相关 -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Sword Edge">
    <!-- 可访问性相关 -->
    <meta name="color-scheme" content="dark light">
    <style>
        /* 基础样式 - 与PC端保持一致 */
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #0c0a15; /* 与PC端一致的深邃紫黑色背景 */
            background-image: 
                radial-gradient(at 20% 20%, hsla(212, 40%, 15%, 1) 0px, transparent 50%),
                radial-gradient(at 80% 80%, hsla(282, 40%, 15%, 1) 0px, transparent 50%);
            color: #e2e8f0;
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .phone-frame {
            max-width: 414px;
            margin: 0 auto;
            min-height: 100vh;
            background: #0c0a15;
            background-image: 
                radial-gradient(at 20% 20%, hsla(212, 40%, 15%, 1) 0px, transparent 50%),
                radial-gradient(at 80% 80%, hsla(282, 40%, 15%, 1) 0px, transparent 50%);
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.5);
            position: relative;
            overflow: hidden;
        }
        
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 414px;
            height: 70px;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-around;
            align-items: center;
            z-index: 50;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.15);
        }
        
        .bottom-nav::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.3), transparent);
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 8px;
            cursor: pointer;
            transition: all 0.2s;
            width: 60px;
            height: 60px;
            border-radius: 12px;
            position: relative;
            overflow: hidden;
        }
        
        .nav-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(59, 130, 246, 0.3) 0%, transparent 70%);
            border-radius: 12px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .nav-item::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%) scaleX(0);
            width: 30px;
            height: 2px;
            background: #3b82f6;
            border-radius: 1px;
            transition: transform 0.3s ease;
        }
        
        .nav-item:hover::before {
            opacity: 1;
        }
        
        .nav-item:hover::after {
            transform: translateX(-50%) scaleX(1);
        }
        
        .nav-item.active {
            background: rgba(59, 130, 246, 0.2);
        }
        
        .nav-item.active::before {
            opacity: 1;
        }
        
        .nav-item.active::after {
            transform: translateX(-50%) scaleX(1);
        }
        
        .nav-item i {
            font-size: 20px;
            margin-bottom: 4px;
        }
        
        .nav-item span {
            font-size: 11px;
        }
        
        .content-area {
            padding-bottom: 80px;
            min-height: 100vh;
        }
        
        .header-enhanced {
            background-color: rgba(17, 24, 39, 0.8);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(71, 85, 105, 0.2);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        
        .settings-button {
            color: white;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .settings-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }
        
        .settings-button:hover::before {
            width: 40px;
            height: 40px;
        }
        
        .settings-button:hover {
            transform: rotate(90deg);
            color: #3b82f6;
        }
        
        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: #ef4444;
            position: relative;
            overflow: hidden;
        }
        
        .status-indicator::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: status-shine 2s infinite;
        }
        
        @keyframes status-shine {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        /* 高对比度模式 */
        @media (prefers-contrast: high) {
            body {
                background-color: #000000;
                color: #ffffff;
            }
            
            .card, .quick-action-card, .stat-card-mini, .training-record-card, .settings-section {
                border: 2px solid #ffffff;
                background-color: #000000;
            }
            
            .action-button {
                border: 2px solid #ffffff;
                background-color: #000000;
                color: #ffffff;
            }
            
            .action-button:hover {
                background-color: #ffffff;
                color: #000000;
            }
            
            .nav-item {
                border: 1px solid #ffffff;
            }
            
            .nav-item.active {
                background-color: #ffffff;
                color: #000000;
            }
        }
        
        /* 深色模式优化 */
        @media (prefers-color-scheme: dark) {
            body {
                background-color: #0a0a0a;
                color: #f0f0f0;
            }
            
            .card, .quick-action-card, .stat-card-mini, .training-record-card {
                background-color: rgba(20, 20, 30, 0.8);
                border-color: rgba(100, 100, 120, 0.4);
            }
            
            .action-button {
                background-color: rgba(40, 40, 60, 0.8);
                border-color: rgba(100, 100, 120, 0.6);
            }
            
            .action-button:hover {
                background-color: rgba(60, 60, 80, 0.9);
                border-color: rgba(120, 120, 140, 0.8);
            }
        }
        
        /* 减少动画模式 */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            
            .ripple {
                display: none;
            }
        }
        
        /* 焦点可见性增强 */
        button:focus, a:focus, input:focus, select:focus, textarea:focus {
            outline: 2px solid #3b82f6;
            outline-offset: 2px;
        }
        
        /* 高对比度焦点指示器 */
        @media (prefers-contrast: high) {
            button:focus, a:focus, input:focus, select:focus, textarea:focus {
                outline: 3px solid #ffffff;
                outline-offset: 2px;
            }
        }
        
        /* 文本对比度优化 */
        .text-primary {
            color: #f0f0f0; /* 提高对比度 */
        }
        
        .text-secondary {
            color: #b0b0b0; /* 提高对比度 */
        }
        
        .text-muted {
            color: #808080; /* 提高对比度 */
        }
        
        /* 按钮对比度优化 */
        .action-button {
            color: #ffffff; /* 确保按钮文字有足够对比度 */
        }
        
        .action-button.secondary {
            color: #e0e0e0; /* 确保次要按钮文字有足够对比度 */
        }
        
        /* 链接对比度优化 */
        a {
            color: #60a5fa; /* 使用更亮的蓝色 */
            text-decoration: underline;
        }
        
        a:hover {
            color: #93c5fd; /* 悬停时更亮 */
        }
        
        a:focus {
            color: #dbeafe; /* 焦点时更亮 */
        }
        
        /* 状态指示器对比度优化 */
        .status-dot.connected {
            background-color: #10b981;
            box-shadow: 0 0 8px rgba(16, 185, 129, 0.7); /* 增强光晕效果 */
        }
        
        .status-dot.disconnected {
            background-color: #ef4444;
            box-shadow: 0 0 8px rgba(239, 68, 68, 0.7); /* 增强光晕效果 */
        }
        
        /* 进度条对比度优化 */
        .progress-bar-fill {
            background: linear-gradient(90deg, #4f8ef7, #10d981); /* 使用更亮的颜色 */
        }
        
        /* 开关按钮对比度优化 */
        .toggle-switch.active {
            background-color: #4f8ef7; /* 使用更亮的蓝色 */
        }
        
        /* 表单元素对比度优化 */
        input, select, textarea {
            background-color: rgba(30, 30, 40, 0.8);
            border: 1px solid rgba(100, 100, 120, 0.6);
            color: #f0f0f0;
        }
        
        input::placeholder, textarea::placeholder {
            color: #a0a0a0; /* 提高占位符对比度 */
        }
        
        /* 错误和成功状态对比度优化 */
        .error-message {
            color: #fca5a5; /* 使用更亮的红色 */
            background-color: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.5);
        }
        
        .success-message {
            color: #86efac; /* 使用更亮的绿色 */
            background-color: rgba(16, 185, 129, 0.2);
            border: 1px solid rgba(16, 185, 129, 0.5);
        }
        
        /* 警告状态对比度优化 */
        .warning-message {
            color: #fcd34d; /* 使用更亮的黄色 */
            background-color: rgba(245, 158, 11, 0.2);
            border: 1px solid rgba(245, 158, 11, 0.5);
        }
        
        /* 信息状态对比度优化 */
        .info-message {
            color: #93c5fd; /* 使用更亮的蓝色 */
            background-color: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.5);
        }
        
        /* 增强文本对比度 */
        .text-high-contrast {
            color: #ffffff; /* 纯白文本，最高对比度 */
        }
        
        .text-medium-contrast {
            color: #e0e0e0; /* 浅灰色文本，高对比度 */
        }
        
        .text-low-contrast {
            color: #b0b0b0; /* 中等灰色文本，中等对比度 */
        }
        
        /* 背景对比度优化 */
        .bg-high-contrast {
            background-color: #000000; /* 纯黑背景，最高对比度 */
        }
        
        .bg-medium-contrast {
            background-color: #1a1a1a; /* 深灰背景，高对比度 */
        }
        
        .bg-low-contrast {
            background-color: #2a2a2a; /* 中等灰背景，中等对比度 */
        }
        
        /* 边框对比度优化 */
        .border-high-contrast {
            border-color: #ffffff; /* 纯白边框，最高对比度 */
        }
        
        .border-medium-contrast {
            border-color: #a0a0a0; /* 浅灰边框，高对比度 */
        }
        
        .border-low-contrast {
            border-color: #606060; /* 中等灰边框，中等对比度 */
        }
        
        /* 高对比度模式下的按钮优化 */
        @media (prefers-contrast: high) {
            .action-button, .list-button, .quick-action-card {
                border: 2px solid #ffffff;
                background-color: #000000;
                color: #ffffff;
            }
            
            .action-button:hover, .list-button:hover, .quick-action-card:hover {
                background-color: #ffffff;
                color: #000000;
            }
            
            .card, .stat-card, .stat-card-mini, .training-record-card, .settings-section {
                border: 2px solid #ffffff;
                background-color: #000000;
            }
            
            .toggle-switch {
                border: 2px solid #ffffff;
            }
            
            .toggle-switch.active {
                background-color: #ffffff;
            }
            
            .toggle-switch.active::after {
                background-color: #000000;
            }
        }
        
        /* 深色模式下的对比度优化 */
        @media (prefers-color-scheme: dark) {
            .action-button, .list-button, .quick-action-card {
                background-color: rgba(40, 40, 60, 0.9);
                border-color: rgba(120, 120, 140, 0.8);
                color: #f0f0f0;
            }
            
            .action-button:hover, .list-button:hover, .quick-action-card:hover {
                background-color: rgba(60, 60, 80, 0.95);
                border-color: rgba(140, 140, 160, 0.9);
            }
            
            .card, .stat-card, .stat-card-mini, .training-record-card, .settings-section {
                background-color: rgba(25, 25, 35, 0.9);
                border-color: rgba(110, 110, 130, 0.6);
            }
            
            .text-primary {
                color: #f0f0f0;
            }
            
            .text-secondary {
                color: #c0c0c0;
            }
            
            .text-muted {
                color: #909090;
            }
        }
        
        /* 焦点管理增强 */
        .focusable {
            position: relative;
            outline: none;
        }
        
        .focusable:focus {
            outline: 2px solid #3b82f6;
            outline-offset: 2px;
        }
        
        /* 高对比度焦点指示器 */
        @media (prefers-contrast: high) {
            .focusable:focus {
                outline: 3px solid #ffffff;
                outline-offset: 2px;
            }
        }
        
        /* 焦点陷阱样式 */
        .focus-trap {
            position: relative;
        }
        
        .focus-trap::before,
        .focus-trap::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 1000;
        }
        
        /* 跳转到主内容的链接 */
        .skip-to-main {
            position: absolute;
            top: -40px;
            left: 0;
            background: #3b82f6;
            color: white;
            padding: 8px;
            z-index: 100;
            transition: top 0.3s;
            border-radius: 0 0 4px 0;
        }
        
        .skip-to-main:focus {
            top: 0;
        }
        
        /* 焦点指示器动画 */
        @keyframes focus-pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.5);
            }
            70% {
                box-shadow: 0 0 0 8px rgba(59, 130, 246, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(59, 130, 246, 0);
            }
        }
        
        .focus-indicator:focus {
            animation: focus-pulse 1.5s infinite;
        }
        
        /* 高对比度焦点指示器动画 */
        @media (prefers-contrast: high) {
            @keyframes focus-pulse-high {
                0% {
                    box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7);
                }
                70% {
                    box-shadow: 0 0 0 10px rgba(255, 255, 255, 0);
                }
                100% {
                    box-shadow: 0 0 0 0 rgba(255, 255, 255, 0);
                }
            }
            
            .focus-indicator:focus {
                animation: focus-pulse-high 1.5s infinite;
            }
        }
        
        /* 焦点顺序管理 */
        .focus-order-1 { order: 1; }
        .focus-order-2 { order: 2; }
        .focus-order-3 { order: 3; }
        .focus-order-4 { order: 4; }
        .focus-order-5 { order: 5; }
        
        /* 视觉焦点指示器 */
        .visual-focus {
            position: relative;
        }
        
        .visual-focus::after {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border: 2px solid transparent;
            border-radius: inherit;
            transition: border-color 0.2s ease;
            pointer-events: none;
        }
        
        .visual-focus:focus::after {
            border-color: #3b82f6;
        }
        
        /* 高对比度视觉焦点 */
        @media (prefers-contrast: high) {
            .visual-focus:focus::after {
                border-color: #ffffff;
                border-width: 3px;
            }
        }
        
        /* 键盘导航提示 */
        .keyboard-hint {
            position: absolute;
            bottom: -25px;
            right: 0;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            font-size: 11px;
            padding: 2px 6px;
            border-radius: 3px;
            opacity: 0;
            transition: opacity 0.2s ease;
            pointer-events: none;
            white-space: nowrap;
        }
        
        .keyboard-hint.visible {
            opacity: 1;
        }
        
        /* 焦点区域高亮 */
        .focus-highlight {
            transition: all 0.2s ease;
        }
        
        .focus-highlight:focus {
            transform: scale(1.02);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
            z-index: 10;
        }
        
        /* 高对比度焦点区域高亮 */
        @media (prefers-contrast: high) {
            .focus-highlight:focus {
                transform: scale(1.02);
                box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.5);
                z-index: 10;
            }
        }
        
        /* 屏幕阅读器专用焦点指示器 */
        .sr-only-focus {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
        
        .sr-only-focus:focus {
            position: static;
            width: auto;
            height: auto;
            padding: inherit;
            margin: inherit;
            overflow: visible;
            clip: auto;
            white-space: inherit;
        }
        
        /* 焦点管理辅助类 */
        .focus-container {
            position: relative;
        }
        
        .focus-container:focus-within {
            outline: 1px solid rgba(59, 130, 246, 0.5);
            outline-offset: 2px;
        }
        
        /* 响应式设计可访问性增强 */
        @media (max-width: 320px) {
            /* 小屏幕设备适配 */
            .phone-frame {
                width: 100%;
                height: 100vh;
                border-radius: 0;
                margin: 0;
                box-shadow: none;
            }
            
            .content-area {
                padding: 12px;
            }
            
            .welcome-card {
                padding: 12px;
            }
            
            .welcome-card .flex {
                flex-direction: column;
                text-align: center;
            }
            
            .welcome-card .flex > div:first-child {
                margin-bottom: 12px;
            }
            
            .quick-action-card {
                padding: 12px;
            }
            
            .quick-action-icon {
                width: 40px;
                height: 40px;
            }
            
            .stat-card-mini {
                padding: 10px;
            }
            
            .training-record-card {
                padding: 12px;
            }
            
            .training-record-card .flex {
                flex-direction: column;
                text-align: center;
            }
            
            .training-record-card .flex > div:first-child {
                margin-bottom: 8px;
            }
            
            .training-record-card .text-right {
                text-align: center;
                margin-top: 8px;
            }
        }
        
        @media (min-width: 768px) {
            /* 大屏幕设备适配 */
            .phone-frame {
                max-width: 414px;
                margin: 20px auto;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            }
            
            .content-area {
                padding: 24px;
            }
            
            .quick-action-card {
                padding: 20px;
            }
            
            .stat-card-mini {
                padding: 16px;
            }
            
            .training-record-card {
                padding: 16px;
            }
            
            /* 大屏幕上的焦点指示器增强 */
            .focusable:focus {
                outline-width: 3px;
                outline-offset: 3px;
            }
            
            .focus-highlight:focus {
                transform: scale(1.03);
                box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.4);
            }
        }
        
        /* 高分辨率屏幕优化 */
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            .icon {
                image-rendering: -webkit-optimize-contrast;
                image-rendering: crisp-edges;
            }
            
            .status-indicator {
                box-shadow: 0 0 15px rgba(16, 185, 129, 0.8);
            }
        }
        
        /* 横屏模式适配 */
        @media (orientation: landscape) and (max-height: 500px) {
            .phone-frame {
                height: 100vh;
                max-height: 500px;
            }
            
            .header-enhanced {
                padding: 8px 16px;
            }
            
            .content-area {
                padding: 12px 16px;
            }
            
            .welcome-card {
                margin-bottom: 12px;
                padding: 12px;
            }
            
            .mb-8 {
                margin-bottom: 16px;
            }
            
            .mb-6 {
                margin-bottom: 12px;
            }
            
            .quick-action-card {
                padding: 12px;
            }
            
            .quick-action-content h4 {
                font-size: 14px;
            }
            
            .quick-action-content p {
                font-size: 11px;
            }
        }
        
        /* 触摸设备优化 */
        @media (hover: none) and (pointer: coarse) {
            .action-button {
                min-height: 48px;
                min-width: 48px;
            }
            
            .quick-action-card {
                min-height: 80px;
            }
            
            .stat-card-mini {
                min-height: 80px;
            }
            
            .training-record-card {
                min-height: 80px;
            }
            
            /* 增大触摸目标 */
            .nav-item {
                min-height: 48px;
                padding: 12px;
            }
            
            .settings-button {
                min-width: 48px;
                min-height: 48px;
            }
            
            /* 减少悬停效果 */
            .action-button:hover,
            .quick-action-card:hover,
            .stat-card-mini:hover,
            .training-record-card:hover {
                transform: none;
            }
            
            /* 增强触摸反馈 */
            .action-button:active,
            .quick-action-card:active,
            .stat-card-mini:active,
            .training-record-card:active {
                transform: scale(0.98);
                opacity: 0.8;
            }
        }
        
        /* 减少动画偏好 */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
            
            .focus-indicator:focus {
                animation: none !important;
            }
            
            .status-indicator.active {
                animation: none !important;
            }
        }
        
        /* 高对比度模式响应式适配 */
        @media (prefers-contrast: high) {
            @media (max-width: 320px) {
                .phone-frame {
                    border: 2px solid #ffffff;
                }
                
                .welcome-card,
                .quick-action-card,
                .stat-card-mini,
                .training-record-card {
                    border: 1px solid #ffffff;
                }
            }
            
            @media (min-width: 768px) {
                .phone-frame {
                    border: 3px solid #ffffff;
                }
                
                .welcome-card,
                .quick-action-card,
                .stat-card-mini,
                .training-record-card {
                    border: 2px solid #ffffff;
                }
            }
        }
        
        /* 深色模式响应式适配 */
        @media (prefers-color-scheme: dark) {
            @media (max-width: 320px) {
                .welcome-card,
                .quick-action-card,
                .stat-card-mini,
                .training-record-card {
                    background-color: rgba(15, 23, 42, 0.95);
                }
            }
            
            @media (min-width: 768px) {
                .welcome-card,
                .quick-action-card,
                .stat-card-mini,
                .training-record-card {
                    background-color: rgba(15, 23, 42, 0.9);
                }
            }
        }
        
        /* 链接可访问性增强 */
        a:not(.nav-item):not(.action-button) {
            position: relative;
            text-decoration: underline;
            text-decoration-thickness: 2px;
            text-underline-offset: 2px;
        }
        
        a:not(.nav-item):not(.action-button):hover {
            text-decoration-thickness: 3px;
        }
        
        a:not(.nav-item):not(.action-button):focus {
            outline: none;
            text-decoration-thickness: 3px;
        }
        
        /* 高对比度链接样式 */
        @media (prefers-contrast: high) {
            a:not(.nav-item):not(.action-button) {
                color: #ffffff;
                text-decoration: underline;
                text-decoration-thickness: 3px;
            }
        }
        
        /* 可访问性增强 - 屏幕阅读器专用内容 */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
        
        /* 跳转到主内容的链接 */
        .skip-to-main {
            position: absolute;
            top: -40px;
            left: 0;
            background: #3b82f6;
            color: white;
            padding: 8px;
            z-index: 100;
            transition: top 0.3s;
        }
        
        .skip-to-main:focus {
            top: 0;
        }
        
        .status-indicator.connected {
            background-color: #10b981;
            box-shadow: 0 0 10px rgba(16, 185, 129, 0.7);
        }
        
        .welcome-card {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(16, 185, 129, 0.2));
            border: 1px solid rgba(71, 85, 105, 0.3);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .welcome-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5), transparent);
            animation: welcome-shine 3s infinite;
        }
        
        @keyframes welcome-shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .action-button {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(16, 185, 129, 0.2));
            border: 1px solid rgba(71, 85, 105, 0.3);
            border-radius: 12px;
            padding: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 8px;
            color: white;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            width: 100%;
            max-width: 160px;
            margin: 0 auto;
        }
        
        .action-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.4), rgba(16, 185, 129, 0.4));
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .action-button:hover::before {
            opacity: 1;
        }
        
        .action-button:active {
            transform: scale(0.95);
        }
        
        .action-button i {
            font-size: 24px;
            z-index: 1;
        }
        
        .action-button span {
            font-size: 14px;
            font-weight: 500;
            z-index: 1;
        }
        
        .action-button.secondary {
            background: linear-gradient(135deg, rgba(107, 114, 128, 0.2), rgba(75, 85, 99, 0.2));
            border: 1px solid rgba(107, 114, 128, 0.3);
        }
        
        .action-button.secondary::before {
            background: linear-gradient(135deg, rgba(107, 114, 128, 0.4), rgba(75, 85, 99, 0.4));
        }
        
        .skeleton-preview {
            width: 100%;
            height: 180px;
            background: rgba(30, 41, 59, 0.3);
            border-radius: 12px;
            position: relative;
            overflow: hidden;
        }
        
        .skeleton-preview::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.1), transparent);
            animation: skeleton-scan 3s infinite;
        }
        
        @keyframes skeleton-scan {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .skeleton-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: rgba(59, 130, 246, 0.6);
            position: absolute;
            box-shadow: 0 0 10px rgba(59, 130, 246, 0.4);
            animation: pulse 2s infinite alternate;
        }
        
        @keyframes pulse {
            0% { opacity: 0.6; transform: scale(0.8); }
            100% { opacity: 1; transform: scale(1.2); }
        }
        
        .page-content {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .page-content.hidden {
            display: none;
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(59, 130, 246, 0.2);
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .loading-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .loading-text {
            color: white;
            margin-top: 16px;
            font-size: 14px;
        }
        
        .card {
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(71, 85, 105, 0.5);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            border-color: rgba(59, 130, 246, 0.3);
        }
        
        .stat-card {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(6, 182, 212, 0.2) 100%);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(59, 130, 246, 0.1);
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
        }
        
        .stat-card::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.05) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }
        
        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .progress-bar {
            height: 8px;
            background: rgba(71, 85, 105, 0.5);
            border-radius: 4px;
            overflow: hidden;
            margin: 8px 0;
            position: relative;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
        }
        
        .progress-bar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #06b6d4);
            border-radius: 4px;
            transition: width 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: progress-shine 2s infinite;
        }
        
        @keyframes progress-shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .skeleton-preview {
            background: #000;
            border-radius: 12px;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.5);
        }
        
        .skeleton-preview::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.1), transparent);
            animation: skeleton-scan 3s infinite;
        }
        
        @keyframes skeleton-scan {
            0% { left: -100%; }
            50%, 100% { left: 100%; }
        }
        
        .skeleton-dot {
            width: 10px;
            height: 10px;
            background: #3b82f6;
            border-radius: 50%;
            position: absolute;
            box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
            transition: all 0.3s ease;
        }
        
        .skeleton-dot.active {
            background: #10b981;
            box-shadow: 0 0 15px rgba(16, 185, 129, 0.7);
            animation: pulse-dot 1.5s infinite;
        }
        
        @keyframes pulse-dot {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .action-button {
            background: linear-gradient(135deg, #3b82f6, #06b6d4);
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            padding: 12px 24px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .action-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .action-button:hover::before {
            left: 100%;
        }
        
        .action-button:active {
            transform: scale(0.98);
            box-shadow: 0 2px 10px rgba(59, 130, 246, 0.3);
        }
        
        .action-button.secondary {
            background: rgba(71, 85, 105, 0.5);
            border: 1px solid rgba(71, 85, 105, 0.8);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .action-button.secondary:hover {
            background: rgba(71, 85, 105, 0.7);
            border-color: rgba(71, 85, 105, 1);
        }
        
        /* 新增样式 - 快速操作卡片 */
        .quick-action-card {
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(71, 85, 105, 0.3);
            border-radius: 16px;
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .quick-action-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(16, 185, 129, 0.1));
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .quick-action-card:hover::before {
            opacity: 1;
        }
        
        .quick-action-card:active {
            transform: scale(0.98);
        }
        
        .quick-action-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 1;
        }
        
        .quick-action-icon i {
            font-size: 20px;
        }
        
        .quick-action-content {
            flex: 1;
            text-align: left;
            position: relative;
            z-index: 1;
        }
        
        .quick-action-content h4 {
            margin-bottom: 4px;
        }
        
        /* 新增样式 - 迷你统计卡片 */
        .stat-card-mini {
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(71, 85, 105, 0.3);
            border-radius: 12px;
            padding: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
        }
        
        .stat-card-mini:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }
        
        .stat-icon {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            background: rgba(30, 41, 59, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .stat-icon i {
            font-size: 16px;
        }
        
        .stat-content {
            flex: 1;
        }
        
        .stat-value {
            font-size: 20px;
            font-weight: 700;
            color: #e2e8f0;
            line-height: 1.2;
        }
        
        .stat-label {
            font-size: 11px;
            color: #94a3b8;
            margin-top: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        /* 新增样式 - 训练记录卡片 */
        .training-record-card {
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(71, 85, 105, 0.3);
            border-radius: 12px;
            padding: 12px;
            transition: all 0.3s ease;
        }
        
        .training-record-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }
        
        /* 新增样式 - 设置页面优化 */
        .settings-section {
            margin-bottom: 20px;
        }
        
        .settings-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }
        
        .settings-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid rgba(71, 85, 105, 0.2);
        }
        
        .settings-item:last-child {
            border-bottom: none;
        }
        
        .settings-item-info {
            display: flex;
            flex-direction: column;
        }
        
        .settings-item-title {
            color: #e2e8f0;
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 4px;
        }
        
        .settings-item-desc {
            color: #94a3b8;
            font-size: 12px;
        }
        
        .device-status {
            display: flex;
            align-items: center;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-dot.connected {
            background-color: #10b981;
            box-shadow: 0 0 8px rgba(16, 185, 129, 0.5);
        }
        
        .status-dot.disconnected {
            background-color: #ef4444;
        }
        
        .list-button {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            padding: 12px 16px;
            background-color: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(71, 85, 105, 0.3);
            border-radius: 12px;
            color: #e2e8f0;
            text-align: left;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .list-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s ease;
        }
        
        .list-button:hover::before {
            left: 100%;
        }
        
        .list-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }
        
        .list-button:active {
            transform: translateY(0);
        }
        
        /* 按钮点击涟漪效果 */
        .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            transform: scale(0);
            animation: ripple-animation 0.6s ease-out;
            pointer-events: none;
        }
        
        @keyframes ripple-animation {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }
        
        /* 页面切换动画 */
        .page {
            opacity: 0;
            transform: translateX(20px);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        
        .page.active {
            opacity: 1;
            transform: translateX(0);
        }
        
        /* 底部导航栏激活状态动画 */
        .nav-item.active {
            position: relative;
        }
        
        .nav-item.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background: #3b82f6;
            animation: pulse-dot 1.5s infinite;
        }
        
        @keyframes pulse-dot {
            0% {
                box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(59, 130, 246, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(59, 130, 246, 0);
            }
        }
        
        /* 加载状态动画 */
        .skeleton {
            background: linear-gradient(90deg, rgba(30, 41, 59, 0.5) 25%, rgba(71, 85, 105, 0.3) 50%, rgba(30, 41, 59, 0.5) 75%);
            background-size: 200% 100%;
            animation: skeleton-loading 1.5s infinite;
        }
        
        @keyframes skeleton-loading {
            0% {
                background-position: 200% 0;
            }
            100% {
                background-position: -200% 0;
            }
        }
        
        /* 开关按钮动画 */
        .toggle-switch {
            position: relative;
            width: 48px;
            height: 24px;
            background-color: rgba(71, 85, 105, 0.5);
            border-radius: 12px;
            transition: background-color 0.3s ease;
            cursor: pointer;
        }
        
        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background-color: #e2e8f0;
            border-radius: 50%;
            transition: transform 0.3s ease;
        }
        
        .toggle-switch.active {
            background-color: #3b82f6;
        }
        
        .toggle-switch.active::after {
            transform: translateX(24px);
        }
        
        /* 卡片进入动画 */
        @keyframes card-entrance {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .card-entrance {
            animation: card-entrance 0.5s ease forwards;
        }
        
        /* 数字变化动画 */
        @keyframes count-up {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        .count-animation {
            animation: count-up 0.5s ease;
        }
        
        /* 进度条动画 */
        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #10b981);
            border-radius: 4px;
            transition: width 1s ease;
            position: relative;
            overflow: hidden;
        }
        
        .progress-bar-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: progress-shine 2s infinite;
        }
        
        @keyframes progress-shine {
            0% {
                transform: translateX(-100%);
            }
            100% {
                transform: translateX(100%);
            }
        }
        
        /* 悬浮提示框 */
        .tooltip {
            position: relative;
        }
        
        .tooltip::before {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(30, 41, 59, 0.9);
            color: #e2e8f0;
            padding: 6px 10px;
            border-radius: 6px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            margin-bottom: 8px;
            z-index: 10;
        }
        
        .tooltip::after {
            content: '';
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            border-width: 5px;
            border-style: solid;
            border-color: rgba(30, 41, 59, 0.9) transparent transparent transparent;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            z-index: 10;
        }
        
        .tooltip:hover::before,
        .tooltip:hover::after {
            opacity: 1;
        }
        
        /* 滑动面板动画 */
        .slide-panel {
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }
        
        .slide-panel.active {
            transform: translateY(0);
        }
        
        /* 按钮加载状态 */
        .button-loading {
            position: relative;
            color: transparent !important;
            pointer-events: none;
        }
        
        .button-loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 16px;
            height: 16px;
            margin: -8px 0 0 -8px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top: 2px solid #fff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* 成功/错误提示动画 */
        @keyframes slide-in-up {
            from {
                transform: translateY(100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        @keyframes slide-out-down {
            from {
                transform: translateY(0);
                opacity: 1;
            }
            to {
                transform: translateY(100%);
                opacity: 0;
            }
        }
        
        .toast-enter {
            animation: slide-in-up 0.3s ease forwards;
        }
        
        .toast-exit {
            animation: slide-out-down 0.3s ease forwards;
        }
        
        .list-button:hover {
            background-color: rgba(59, 130, 246, 0.1);
            border-color: rgba(59, 130, 246, 0.3);
        }
        
        .list-button.danger {
            border-color: rgba(239, 68, 68, 0.3);
        }
        
        .list-button.danger:hover {
            background-color: rgba(239, 68, 68, 0.1);
        }
        
        .toggle-button {
            position: relative;
            width: 60px;
            height: 30px;
            background: rgba(71, 85, 105, 0.5);
            border-radius: 15px;
            cursor: pointer;
            transition: background 0.3s;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .toggle-button.active {
            background: linear-gradient(90deg, #3b82f6, #06b6d4);
            box-shadow: 0 2px 10px rgba(59, 130, 246, 0.3);
        }
        
        .toggle-button::after {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .toggle-button.active::after {
            transform: translateX(30px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }
        
        .keypoint-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: rgba(30, 41, 59, 0.5);
            border-radius: 8px;
            margin-bottom: 8px;
            transition: all 0.3s ease;
            border: 1px solid rgba(71, 85, 105, 0.3);
        }
        
        .keypoint-indicator:hover {
            background: rgba(30, 41, 59, 0.7);
            border-color: rgba(59, 130, 246, 0.3);
        }
        
        .keypoint-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #ef4444;
            box-shadow: 0 0 5px rgba(239, 68, 68, 0.5);
            transition: all 0.3s ease;
        }
        
        .keypoint-dot.active {
            background: #10b981;
            box-shadow: 0 0 10px rgba(16, 185, 129, 0.7);
            animation: pulse-dot 1.5s infinite;
        }
        
        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #ef4444;
            display: inline-block;
            margin-right: 8px;
            box-shadow: 0 0 10px rgba(239, 68, 68, 0.5);
            transition: all 0.3s ease;
        }
        
        .status-indicator.active {
            background: #10b981;
            box-shadow: 0 0 15px rgba(16, 185, 129, 0.7);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .slide-panel {
            position: fixed;
            bottom: -100%;
            left: 0;
            width: 100%;
            max-width: 414px;
            background: rgba(15, 23, 42, 0.98);
            backdrop-filter: blur(20px);
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            padding: 20px;
            z-index: 100;
            transition: bottom 0.3s ease;
            max-height: 70vh;
            overflow-y: auto;
            box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .slide-panel.active {
            bottom: 0;
        }
        
        .panel-handle {
            width: 40px;
            height: 4px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
            margin: 0 auto 16px;
        }
        
        .chart-container {
            height: 180px;
            background: rgba(30, 41, 59, 0.3);
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 16px;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.2);
        }
        
        .chart-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.5), transparent);
            animation: chart-scan 3s infinite;
        }
        
        @keyframes chart-scan {
            0% { transform: translateY(0); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(180px); opacity: 0; }
        }
        
        .chart-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(255, 255, 255, 0.5);
            font-size: 14px;
        }
    </style>
</head>
<body>
    <a href="#main-content" class="skip-to-main">跳转到主内容</a>
    <div class="phone-frame">
        <!-- 顶部状态栏 -->
        <header class="header-enhanced px-4 py-3 flex justify-between items-center sticky top-0 z-40" role="banner">
            <h1 class="text-xl font-bold text-high-contrast">Sword Edge</h1>
            <div class="flex items-center gap-3">
                <div class="status-indicator" id="connectionStatus" aria-label="连接状态指示器"></div>
                <span class="text-sm text-medium-contrast" id="connectionText">未连接</span>
                <button class="settings-button focus-ring" onclick="toggleSettings()" aria-label="设置">
                    <i class="fas fa-cog"></i>
                </button>
            </div>
        </header>
        
        <!-- 内容区域 -->
        <main id="main-content" class="content-area px-4 py-4" role="main">
            <!-- 首页 -->
            <div id="homePage" class="page-content" role="main" aria-labelledby="homePageTitle" aria-hidden="false">
                <h2 id="homePageTitle" class="sr-only">首页</h2>
                <!-- 欢迎卡片 - 优化为更简洁的个人信息卡片 -->
                <div class="welcome-card max-w-md mx-auto mb-6 focus-container">
                    <div class="flex items-center gap-4">
                        <div class="w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-teal-500 flex items-center justify-center shadow-lg" id="welcomeAvatar" tabindex="0" aria-label="用户头像">
                            <i class="fas fa-user text-high-contrast text-2xl"></i>
                        </div>
                        <div class="flex-1">
                            <h2 class="text-xl font-bold text-high-contrast mb-1">欢迎回来，剑客</h2>
                            <div class="flex items-center gap-3 text-sm">
                                <span class="text-medium-contrast">今日训练: <span class="text-cyan-400 font-medium">0分钟</span></span>
                                <span class="text-low-contrast">|</span>
                                <span class="text-medium-contrast">本周: <span class="text-cyan-400 font-medium">3次</span></span>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-xs text-low-contrast mb-1">训练等级</div>
                            <div class="bg-gradient-to-r from-blue-500 to-cyan-400 text-high-contrast text-xs px-2 py-1 rounded-full" tabindex="0" aria-label="训练等级: 中级">中级</div>
                        </div>
                    </div>
                </div>
                
                <!-- 快速操作 - 优化为更突出的行动区域 -->
                <div class="mb-8 focus-container">
                    <h3 class="text-sm font-medium text-medium-contrast uppercase tracking-wider mb-3">快速开始</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <button class="quick-action-card focus-ring" onclick="startQuickTraining()">
                            <div class="quick-action-icon bg-blue-500/20">
                                <i class="fas fa-play text-blue-400"></i>
                            </div>
                            <div class="quick-action-content">
                                <h4 class="text-high-contrast font-medium">快速训练</h4>
                                <p class="text-medium-contrast text-xs">立即开始训练</p>
                            </div>
                        </button>
                        <button class="quick-action-card focus-ring" onclick="viewHistory()">
                            <div class="quick-action-icon bg-purple-500/20">
                                <i class="fas fa-history text-purple-400"></i>
                            </div>
                            <div class="quick-action-content">
                                <h4 class="text-high-contrast font-medium">历史记录</h4>
                                <p class="text-medium-contrast text-xs">查看训练数据</p>
                            </div>
                        </button>
                    </div>
                </div>
                
                <!-- 训练概览 - 优化为更直观的数据展示 -->
                <div class="mb-8 focus-container">
                    <div class="flex justify-between items-center mb-3">
                        <h3 class="text-sm font-medium text-medium-contrast uppercase tracking-wider">训练概览</h3>
                        <button class="text-cyan-400 text-sm focus-ring">查看全部</button>
                    </div>
                    <div class="grid grid-cols-3 gap-3">
                        <div class="stat-card-mini" tabindex="0" aria-label="本周训练次数: 3次">
                            <div class="stat-icon">
                                <i class="fas fa-fire text-orange-400"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value text-high-contrast">3</div>
                                <div class="stat-label text-medium-contrast">本周次数</div>
                            </div>
                        </div>
                        <div class="stat-card-mini" tabindex="0" aria-label="训练总时长: 55分钟">
                            <div class="stat-icon">
                                <i class="fas fa-clock text-blue-400"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value text-high-contrast">55</div>
                                <div class="stat-label text-medium-contrast">训练分钟</div>
                            </div>
                        </div>
                        <div class="stat-card-mini" tabindex="0" aria-label="平均训练分数: 82分">
                            <div class="stat-icon">
                                <i class="fas fa-trophy text-yellow-400"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value text-high-contrast">82</div>
                                <div class="stat-label text-medium-contrast">平均分数</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 最近训练 - 优化为更紧凑的列表 -->
                <div class="focus-container">
                    <div class="flex justify-between items-center mb-3">
                        <h3 class="text-sm font-medium text-medium-contrast uppercase tracking-wider">最近训练</h3>
                        <button class="text-cyan-400 text-sm focus-ring">查看全部</button>
                    </div>
                    <div class="space-y-3">
                        <div class="training-record-card" tabindex="0" aria-label="直刺训练，得分85分，训练时长15分钟">
                            <div class="flex items-center">
                                <div class="w-10 h-10 rounded-lg bg-blue-500/20 flex items-center justify-center mr-3">
                                    <i class="fas fa-crosshairs text-blue-400"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="text-white font-medium">直刺训练</p>
                                    <p class="text-gray-400 text-xs">今天 14:30</p>
                                </div>
                                <div class="text-right">
                                    <div class="flex items-center">
                                        <span class="text-cyan-400 font-bold mr-1">85</span>
                                        <span class="text-gray-500 text-xs">分</span>
                                    </div>
                                    <p class="text-gray-400 text-xs">15分钟</p>
                                </div>
                            </div>
                            <div class="mt-2">
                                <div class="w-full bg-gray-700 rounded-full h-1.5">
                                    <div class="bg-gradient-to-r from-blue-500 to-cyan-400 h-1.5 rounded-full" style="width: 85%"></div>
                                </div>
                            </div>
                        </div>
                        <div class="training-record-card" tabindex="0" aria-label="劈砍训练，得分78分，训练时长20分钟">
                            <div class="flex items-center">
                                <div class="w-10 h-10 rounded-lg bg-blue-500/20 flex items-center justify-center mr-3">
                                    <i class="fas fa-crosshairs text-blue-400"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="text-white font-medium">直刺训练</p>
                                    <p class="text-gray-400 text-xs">今天 14:30</p>
                                </div>
                                <div class="text-right">
                                    <div class="flex items-center">
                                        <span class="text-cyan-400 font-bold mr-1">85</span>
                                        <span class="text-gray-500 text-xs">分</span>
                                    </div>
                                    <p class="text-gray-400 text-xs">15分钟</p>
                                </div>
                            </div>
                            <div class="mt-2">
                                <div class="w-full bg-gray-700 rounded-full h-1.5">
                                    <div class="bg-gradient-to-r from-blue-500 to-cyan-400 h-1.5 rounded-full" style="width: 85%"></div>
                                </div>
                            </div>
                        </div>
                        <div class="training-record-card">
                            <div class="flex items-center">
                                <div class="w-10 h-10 rounded-lg bg-purple-500/20 flex items-center justify-center mr-3">
                                    <i class="fas fa-shield-alt text-purple-400"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="text-white font-medium">防守反击</p>
                                    <p class="text-gray-400 text-xs">昨天 19:15</p>
                                </div>
                                <div class="text-right">
                                    <div class="flex items-center">
                                        <span class="text-cyan-400 font-bold mr-1">78</span>
                                        <span class="text-gray-500 text-xs">分</span>
                                    </div>
                                    <p class="text-gray-400 text-xs">20分钟</p>
                                </div>
                            </div>
                            <div class="mt-2">
                                <div class="w-full bg-gray-700 rounded-full h-1.5">
                                    <div class="bg-gradient-to-r from-purple-500 to-pink-400 h-1.5 rounded-full" style="width: 78%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 实时监控页面 -->
            <div id="monitorPage" class="page-content hidden" role="main" aria-labelledby="monitorPageTitle" aria-hidden="true">
                <h2 id="monitorPageTitle" class="sr-only">实时监控</h2>
                <!-- 监控状态 -->
                <div class="card">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-bold text-white">实时训练监控</h2>
                        <div class="toggle-button" id="monitorToggle" onclick="toggleMonitoring()"></div>
                    </div>
                    <p class="text-gray-400 text-sm" id="monitorStatus">点击开关开始监控</p>
                </div>
                
                <!-- 视频预览区域 -->
                <div class="card">
                    <div class="skeleton-preview">
                        <div class="skeleton-dot" style="top: 30%; left: 40%;"></div>
                        <div class="skeleton-dot" style="top: 25%; left: 50%;"></div>
                        <div class="skeleton-dot" style="top: 40%; left: 45%;"></div>
                        <div class="skeleton-dot" style="top: 50%; left: 35%;"></div>
                        <div class="skeleton-dot" style="top: 60%; left: 50%;"></div>
                        <div class="skeleton-dot" style="top: 70%; left: 45%;"></div>
                        <div class="skeleton-dot" style="top: 80%; left: 50%;"></div>
                        <div class="skeleton-dot" style="top: 40%; left: 60%;"></div>
                        <div class="skeleton-dot" style="top: 50%; left: 65%;"></div>
                        <div class="skeleton-dot" style="top: 60%; left: 60%;"></div>
                        <div class="skeleton-dot" style="top: 70%; left: 65%;"></div>
                        <div class="skeleton-dot" style="top: 80%; left: 60%;"></div>
                        <div class="skeleton-dot" style="top: 30%; left: 30%;"></div>
                        <div class="skeleton-dot" style="top: 40%; left: 25%;"></div>
                        <div class="skeleton-dot" style="top: 50%; left: 30%;"></div>
                        <div class="skeleton-dot" style="top: 60%; left: 25%;"></div>
                        <div class="skeleton-dot" style="top: 70%; left: 30%;"></div>
                    </div>
                    <div class="mt-3 flex justify-between items-center">
                        <span class="text-gray-400 text-sm">骨架检测</span>
                        <span class="text-green-400 text-sm font-medium" id="detectionStatus">未开始</span>
                    </div>
                </div>
                
                <!-- 当前动作信息 -->
                <div class="card">
                    <h3 class="text-lg font-semibold text-white mb-3">当前动作</h3>
                    <div class="text-center mb-4">
                        <p class="text-3xl font-bold text-cyan-400" id="currentAction">准备中</p>
                    </div>
                    <div class="mb-4">
                        <div class="flex justify-between text-sm mb-1">
                            <span class="text-gray-400">实时评分</span>
                            <span class="text-white font-bold" id="actionScore">0</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="scoreProgress" style="width: 0%" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="实时评分"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between text-sm mb-1">
                            <span class="text-gray-400">动作质量</span>
                            <span class="text-white font-bold" id="actionQuality">-</span>
                        </div>
                        <div class="flex space-x-1">
                            <div class="flex-1 h-2 bg-gray-700 rounded" id="quality1"></div>
                            <div class="flex-1 h-2 bg-gray-700 rounded" id="quality2"></div>
                            <div class="flex-1 h-2 bg-gray-700 rounded" id="quality3"></div>
                            <div class="flex-1 h-2 bg-gray-700 rounded" id="quality4"></div>
                            <div class="flex-1 h-2 bg-gray-700 rounded" id="quality5"></div>
                        </div>
                    </div>
                </div>
                
                <!-- 关键点检测状态 -->
                <div class="card">
                    <h3 class="text-lg font-semibold text-white mb-3">关键点检测</h3>
                    <div class="grid grid-cols-2 gap-2">
                        <div class="keypoint-indicator">
                            <div class="keypoint-dot" id="kp-head"></div>
                            <span class="text-sm text-gray-300">头部</span>
                        </div>
                        <div class="keypoint-indicator">
                            <div class="keypoint-dot" id="kp-neck"></div>
                            <span class="text-sm text-gray-300">颈部</span>
                        </div>
                        <div class="keypoint-indicator">
                            <div class="keypoint-dot" id="kp-lshoulder"></div>
                            <span class="text-sm text-gray-300">左肩</span>
                        </div>
                        <div class="keypoint-indicator">
                            <div class="keypoint-dot" id="kp-rshoulder"></div>
                            <span class="text-sm text-gray-300">右肩</span>
                        </div>
                        <div class="keypoint-indicator">
                            <div class="keypoint-dot" id="kp-lelbow"></div>
                            <span class="text-sm text-gray-300">左肘</span>
                        </div>
                        <div class="keypoint-indicator">
                            <div class="keypoint-dot" id="kp-relbow"></div>
                            <span class="text-sm text-gray-300">右肘</span>
                        </div>
                        <div class="keypoint-indicator">
                            <div class="keypoint-dot" id="kp-lwrist"></div>
                            <span class="text-sm text-gray-300">左腕</span>
                        </div>
                        <div class="keypoint-indicator">
                            <div class="keypoint-dot" id="kp-rwrist"></div>
                            <span class="text-sm text-gray-300">右腕</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 训练分析页面 -->
            <div id="analysisPage" class="page-content hidden" role="main" aria-labelledby="analysisPageTitle" aria-hidden="true">
                <h2 id="analysisPageTitle" class="sr-only">训练分析</h2>
                <!-- 上传区域 -->
                <div class="card" id="uploadArea">
                    <h2 class="text-xl font-bold text-white mb-4">训练数据分析</h2>
                    <div class="border-2 border-dashed border-gray-600 rounded-xl p-8 text-center" id="dropZone" role="button" tabindex="0" aria-label="视频文件上传区域" aria-describedby="uploadInstructions">
                        <i class="fas fa-cloud-upload-alt text-4xl text-gray-500 mb-4"></i>
                        <p class="text-white mb-2" id="uploadInstructions">拖拽视频文件到此处或点击下方按钮选择文件</p>
                        <p class="text-gray-400 text-sm mb-4">支持MP4、AVI、MOV等常见视频格式</p>
                        <button class="action-button secondary" onclick="document.getElementById('fileInput').click()">
                            <i class="fas fa-folder-open"></i>
                            <span>选择文件</span>
                        </button>
                        <input type="file" id="fileInput" accept="video/*" class="hidden" onchange="handleFileSelect(event)" aria-label="选择视频文件">
                    </div>
                    <div id="uploadProgress" class="hidden mt-4">
                        <p class="text-gray-400 text-sm mb-2">上传进度</p>
                        <div class="progress-bar">
                            <div class="progress-fill" id="uploadProgressBar" style="width: 0%" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="文件上传进度"></div>
                        </div>
                        <p class="text-gray-400 text-sm mt-1" id="uploadStatus">准备上传...</p>
                    </div>
                </div>
                
                <!-- 分析结果 -->
                <div id="analysisResults" class="hidden">
                    <!-- 视频预览 -->
                    <div class="card">
                        <h3 class="text-lg font-semibold text-white mb-3">训练视频</h3>
                        <div class="aspect-video bg-black rounded-lg flex items-center justify-center relative">
                            <i class="fas fa-play-circle text-4xl text-gray-500"></i>
                            <div class="absolute bottom-2 right-2 bg-black/70 px-2 py-1 rounded text-xs text-white">
                                00:45 / 03:20
                            </div>
                        </div>
                    </div>
                    
                    <!-- 总体评分 -->
                    <div class="card bg-gradient-to-br from-blue-600/20 to-cyan-500/20 border border-blue-500/30">
                        <div class="text-center">
                            <p class="text-gray-300 text-sm mb-2">综合评分</p>
                            <p class="text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-cyan-400 mb-2">86</p>
                            <div class="flex justify-center space-x-1 mb-3">
                                <i class="fas fa-star text-yellow-400"></i>
                                <i class="fas fa-star text-yellow-400"></i>
                                <i class="fas fa-star text-yellow-400"></i>
                                <i class="fas fa-star text-yellow-400"></i>
                                <i class="fas fa-star-half-alt text-yellow-400"></i>
                            </div>
                            <p class="text-gray-300 text-sm">表现优秀，继续保持</p>
                        </div>
                    </div>
                    
                    <!-- 动作列表 -->
                    <div class="card">
                        <h3 class="text-lg font-semibold text-white mb-3">检测到的动作</h3>
                        <div class="space-y-2" id="actionList">
                            <div class="flex items-center justify-between p-3 bg-gray-800/50 rounded-lg">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-blue-500/20 rounded-full flex items-center justify-center mr-3">
                                        <i class="fas fa-arrow-right text-blue-400"></i>
                                    </div>
                                    <div>
                                        <p class="text-white font-medium">直刺</p>
                                        <p class="text-gray-400 text-xs">00:12 - 00:18</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-cyan-400 font-bold">92分</p>
                                    <div class="flex space-x-1">
                                        <div class="w-1 h-3 bg-green-400 rounded"></div>
                                        <div class="w-1 h-3 bg-green-400 rounded"></div>
                                        <div class="w-1 h-3 bg-green-400 rounded"></div>
                                        <div class="w-1 h-3 bg-green-400 rounded"></div>
                                        <div class="w-1 h-3 bg-gray-600 rounded"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gray-800/50 rounded-lg">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-blue-500/20 rounded-full flex items-center justify-center mr-3">
                                        <i class="fas fa-shield-alt text-blue-400"></i>
                                    </div>
                                    <div>
                                        <p class="text-white font-medium">防守</p>
                                        <p class="text-gray-400 text-xs">00:35 - 00:42</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-cyan-400 font-bold">88分</p>
                                    <div class="flex space-x-1">
                                        <div class="w-1 h-3 bg-green-400 rounded"></div>
                                        <div class="w-1 h-3 bg-green-400 rounded"></div>
                                        <div class="w-1 h-3 bg-green-400 rounded"></div>
                                        <div class="w-1 h-3 bg-green-400 rounded"></div>
                                        <div class="w-1 h-3 bg-gray-600 rounded"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gray-800/50 rounded-lg">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-blue-500/20 rounded-full flex items-center justify-center mr-3">
                                        <i class="fas fa-exchange-alt text-blue-400"></i>
                                    </div>
                                    <div>
                                        <p class="text-white font-medium">反击</p>
                                        <p class="text-gray-400 text-xs">01:15 - 01:22</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-cyan-400 font-bold">78分</p>
                                    <div class="flex space-x-1">
                                        <div class="w-1 h-3 bg-green-400 rounded"></div>
                                        <div class="w-1 h-3 bg-green-400 rounded"></div>
                                        <div class="w-1 h-3 bg-green-400 rounded"></div>
                                        <div class="w-1 h-3 bg-yellow-400 rounded"></div>
                                        <div class="w-1 h-3 bg-gray-600 rounded"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 技术分析 -->
                    <div class="card">
                        <h3 class="text-lg font-semibold text-white mb-3">技术分析</h3>
                        <div class="space-y-3">
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="text-gray-400">动作准确性</span>
                                    <span class="text-white font-bold">85%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill bg-gradient-to-r from-blue-500 to-cyan-400" style="width: 85%" role="progressbar" aria-valuenow="85" aria-valuemin="0" aria-valuemax="100" aria-label="动作准确性"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="text-gray-400">反应速度</span>
                                    <span class="text-white font-bold">92%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill bg-gradient-to-r from-blue-500 to-cyan-400" style="width: 92%" role="progressbar" aria-valuenow="92" aria-valuemin="0" aria-valuemax="100" aria-label="反应速度"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="text-gray-400">动作连贯性</span>
                                    <span class="text-white font-bold">78%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill bg-gradient-to-r from-blue-500 to-cyan-400" style="width: 78%" role="progressbar" aria-valuenow="78" aria-valuemin="0" aria-valuemax="100" aria-label="动作连贯性"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="text-gray-400">身体协调性</span>
                                    <span class="text-white font-bold">88%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill bg-gradient-to-r from-blue-500 to-cyan-400" style="width: 88%" role="progressbar" aria-valuenow="88" aria-valuemin="0" aria-valuemax="100" aria-label="身体协调性"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 数据统计 -->
                    <div class="card">
                        <h3 class="text-lg font-semibold text-white mb-3">数据统计</h3>
                        <div class="chart-container">
                            <div class="chart-placeholder">技术成长雷达图</div>
                        </div>
                        <div class="chart-container">
                            <div class="chart-placeholder">综合评分趋势</div>
                        </div>
                    </div>
                    
                    <!-- 下载报告 -->
                    <div class="card">
                        <h3 class="text-lg font-semibold text-white mb-3">训练报告</h3>
                        <p class="text-gray-400 text-sm mb-4">生成详细的训练分析报告，包含技术评估和改进建议</p>
                        <div class="grid grid-cols-2 gap-3">
                            <button class="action-button secondary" onclick="downloadReport('pdf')">
                                <i class="fas fa-file-pdf"></i>
                                <span>PDF报告</span>
                            </button>
                            <button class="action-button secondary" onclick="downloadReport('excel')">
                                <i class="fas fa-file-excel"></i>
                                <span>Excel数据</span>
                            </button>
                        </div>
                        <button class="action-button w-full mt-3" onclick="shareResults()">
                            <i class="fas fa-share-alt"></i>
                            <span>分享结果</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- 训练计划页面 -->
            <div id="plansPage" class="page-content hidden" role="main" aria-labelledby="plansPageTitle" aria-hidden="true">
                <h2 id="plansPageTitle" class="sr-only">训练计划</h2>
                <!-- 当前计划 -->
                <div class="card">
                    <h2 class="text-xl font-bold text-white mb-4">当前训练计划</h2>
                    <div class="bg-gradient-to-r from-blue-600 to-cyan-500 rounded-xl p-4 mb-4">
                        <h3 class="text-lg font-semibold text-white mb-2">基础剑法训练</h3>
                        <p class="text-white/80 text-sm mb-3">为期4周的基础剑法训练计划</p>
                        <div class="flex justify-between items-center">
                            <span class="text-white/70 text-sm">进度</span>
                            <span class="text-white font-bold">第2周 / 4周</span>
                        </div>
                        <div class="progress-bar mt-2">
                            <div class="progress-fill" style="width: 50%" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" aria-label="训练进度"></div>
                        </div>
                    </div>
                    <button class="action-button w-full" onclick="continueTraining()">
                        <i class="fas fa-play"></i>
                        <span>继续训练</span>
                    </button>
                </div>
                
                <!-- 今日任务 -->
                <div class="card">
                    <h3 class="text-lg font-semibold text-white mb-3">今日任务</h3>
                    <div class="space-y-3">
                        <div class="flex items-center p-3 bg-gray-800/50 rounded-lg">
                            <input type="checkbox" class="mr-3 w-5 h-5" id="task1" aria-describedby="task1Desc">
                            <label for="task1" class="flex-1 text-white">直刺基础练习 - 10分钟</label>
                            <span id="task1Desc" class="sr-only">基础剑法训练任务1</span>
                        </div>
                        <div class="flex items-center p-3 bg-gray-800/50 rounded-lg">
                            <input type="checkbox" class="mr-3 w-5 h-5" id="task2" aria-describedby="task2Desc">
                            <label for="task2" class="flex-1 text-white">防守反击训练 - 15分钟</label>
                            <span id="task2Desc" class="sr-only">基础剑法训练任务2</span>
                        </div>
                        <div class="flex items-center p-3 bg-gray-800/50 rounded-lg">
                            <input type="checkbox" class="mr-3 w-5 h-5" id="task3" aria-describedby="task3Desc">
                            <label for="task3" class="flex-1 text-white">步法移动练习 - 10分钟</label>
                            <span id="task3Desc" class="sr-only">基础剑法训练任务3</span>
                        </div>
                    </div>
                </div>
                
                <!-- 推荐计划 -->
                <div class="card">
                    <h3 class="text-lg font-semibold text-white mb-3">推荐计划</h3>
                    <div class="space-y-3">
                        <div class="p-3 bg-gray-800/50 rounded-lg">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="text-white font-medium">进阶剑法训练</h4>
                                <span class="text-xs bg-blue-600/30 text-blue-300 px-2 py-1 rounded">中级</span>
                            </div>
                            <p class="text-gray-400 text-sm mb-2">提高剑法技巧和反应速度</p>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-500 text-xs">6周计划</span>
                                <button class="text-blue-400 text-sm" onclick="selectPlan('advanced')">选择</button>
                            </div>
                        </div>
                        <div class="p-3 bg-gray-800/50 rounded-lg">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="text-white font-medium">比赛备战训练</h4>
                                <span class="text-xs bg-red-600/30 text-red-300 px-2 py-1 rounded">高级</span>
                            </div>
                            <p class="text-gray-400 text-sm mb-2">针对比赛场景的专项训练</p>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-500 text-xs">8周计划</span>
                                <button class="text-blue-400 text-sm" onclick="selectPlan('competition')">选择</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 设置页面 -->
            <div id="settingsPage" class="page-content hidden" role="main" aria-labelledby="settingsPageTitle" aria-hidden="true">
                <h2 id="settingsPageTitle" class="sr-only">设置</h2>
                <!-- 用户信息卡片 -->
                <div class="card">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-xl font-bold text-white">个人信息</h2>
                        <button class="text-blue-400 text-sm" onclick="editProfile()">
                            <i class="fas fa-edit mr-1"></i>
                            编辑
                        </button>
                    </div>
                    <div class="flex items-center">
                        <div class="w-20 h-20 bg-gradient-to-br from-blue-500 to-cyan-400 rounded-full flex items-center justify-center text-white text-xl font-bold mr-4 relative" id="userAvatar">
                            <i class="fas fa-user text-3xl"></i>
                            <button class="absolute bottom-0 right-0 w-7 h-7 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs" onclick="changeAvatar()">
                                <i class="fas fa-camera"></i>
                            </button>
                        </div>
                        <div class="flex-1">
                            <p class="text-white font-medium text-lg">剑客001</p>
                            <p class="text-gray-400 text-sm">中级训练者</p>
                            <div class="flex items-center mt-2">
                                <div class="bg-blue-500/20 px-2 py-1 rounded mr-2">
                                    <span class="text-blue-300 text-xs">训练等级: 5</span>
                                </div>
                                <div class="bg-green-500/20 px-2 py-1 rounded">
                                    <span class="text-green-300 text-xs">经验值: 1250</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 设备设置卡片 -->
                <div class="card">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-white">设备设置</h3>
                        <div class="flex items-center">
                            <div class="w-2 h-2 rounded-full mr-2" id="deviceStatusIndicator"></div>
                            <span class="text-sm" id="deviceStatusText">未连接</span>
                        </div>
                    </div>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between p-3 bg-gray-800/50 rounded-lg">
                            <div class="flex items-center">
                                <i class="fas fa-bluetooth text-blue-400 mr-3"></i>
                                <div>
                                    <p class="text-white font-medium">蓝牙设备</p>
                                    <p class="text-gray-400 text-xs">智能剑柄传感器</p>
                                </div>
                            </div>
                            <button class="text-blue-400 text-sm" onclick="scanDevices()">
                                连接
                            </button>
                        </div>
                        <div class="flex items-center justify-between p-3 bg-gray-800/50 rounded-lg">
                            <div class="flex items-center">
                                <i class="fas fa-wifi text-green-400 mr-3"></i>
                                <div>
                                    <p class="text-white font-medium">网络连接</p>
                                    <p class="text-gray-400 text-xs">已连接到WiFi</p>
                                </div>
                            </div>
                            <button class="text-blue-400 text-sm" onclick="changeNetwork()">
                                更改
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- 训练偏好设置 -->
                <div class="card">
                    <h3 class="text-lg font-semibold text-white mb-4">训练偏好</h3>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-white font-medium">语音指导</p>
                                <p class="text-gray-400 text-xs">训练过程中提供语音提示</p>
                            </div>
                            <div class="toggle-button" id="voiceToggle" onclick="toggleVoice()"></div>
                        </div>
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-white font-medium">震动反馈</p>
                                <p class="text-gray-400 text-xs">动作完成时提供震动提示</p>
                            </div>
                            <div class="toggle-button active" id="vibrationToggle" onclick="toggleVibration()"></div>
                        </div>
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-white font-medium">自动保存训练</p>
                                <p class="text-gray-400 text-xs">训练结束后自动保存数据</p>
                            </div>
                            <div class="toggle-button active" id="autoSaveToggle" onclick="toggleAutoSave()"></div>
                        </div>
                    </div>
                </div>
                
                <!-- 数据与隐私 -->
                <div class="card">
                    <h3 class="text-lg font-semibold text-white mb-4">数据与隐私</h3>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-white font-medium">数据同步</p>
                                <p class="text-gray-400 text-xs">将训练数据同步到云端</p>
                            </div>
                            <div class="toggle-button active" id="syncToggle" onclick="toggleSync()"></div>
                        </div>
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-white font-medium">分析数据共享</p>
                                <p class="text-gray-400 text-xs">允许使用数据进行技术分析</p>
                            </div>
                            <div class="toggle-button" id="analyticsToggle" onclick="toggleAnalytics()"></div>
                        </div>
                        <button class="action-button secondary w-full" onclick="exportData()">
                            <i class="fas fa-download"></i>
                            <span>导出训练数据</span>
                        </button>
                    </div>
                </div>
                
                <!-- 其他设置 -->
                <div class="card">
                    <h3 class="text-lg font-semibold text-white mb-4">其他</h3>
                    <div class="space-y-3">
                        <button class="flex items-center justify-between w-full p-3 bg-gray-800/50 rounded-lg" onclick="showAbout()">
                            <div class="flex items-center">
                                <i class="fas fa-info-circle text-blue-400 mr-3"></i>
                                <span class="text-white">关于应用</span>
                            </div>
                            <i class="fas fa-chevron-right text-gray-400 text-sm"></i>
                        </button>
                        <button class="flex items-center justify-between w-full p-3 bg-gray-800/50 rounded-lg" onclick="showHelp()">
                            <div class="flex items-center">
                                <i class="fas fa-question-circle text-green-400 mr-3"></i>
                                <span class="text-white">帮助与支持</span>
                            </div>
                            <i class="fas fa-chevron-right text-gray-400 text-sm"></i>
                        </button>
                        <button class="flex items-center justify-between w-full p-3 bg-red-500/20 rounded-lg border border-red-500/30" onclick="logout()">
                            <div class="flex items-center">
                                <i class="fas fa-sign-out-alt text-red-400 mr-3"></i>
                                <span class="text-red-400">退出登录</span>
                            </div>
                            <i class="fas fa-chevron-right text-red-400/70 text-sm"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 底部导航 -->
        <nav class="bottom-nav" role="navigation" aria-label="主导航">
            <div class="nav-item active" onclick="switchPage('home')" onkeydown="handleNavKeydown(event, 'home')" role="button" tabindex="0" aria-current="page" aria-label="首页">
                <i class="fas fa-home text-blue-400" aria-hidden="true"></i>
                <span class="text-blue-400">首页</span>
            </div>
            <div class="nav-item" onclick="switchPage('monitor')" onkeydown="handleNavKeydown(event, 'monitor')" role="button" tabindex="0" aria-label="监控">
                <i class="fas fa-video text-gray-400" aria-hidden="true"></i>
                <span class="text-gray-400">监控</span>
            </div>
            <div class="nav-item" onclick="switchPage('analysis')" onkeydown="handleNavKeydown(event, 'analysis')" role="button" tabindex="0" aria-label="分析">
                <i class="fas fa-chart-bar text-gray-400" aria-hidden="true"></i>
                <span class="text-gray-400">分析</span>
            </div>
            <div class="nav-item" onclick="switchPage('plans')" onkeydown="handleNavKeydown(event, 'plans')" role="button" tabindex="0" aria-label="计划">
                <i class="fas fa-calendar-alt text-gray-400" aria-hidden="true"></i>
                <span class="text-gray-400">计划</span>
            </div>
            <div class="nav-item" onclick="switchPage('settings')" onkeydown="handleNavKeydown(event, 'settings')" role="button" tabindex="0" aria-label="设置">
                <i class="fas fa-cog text-gray-400" aria-hidden="true"></i>
                <span class="text-gray-400">设置</span>
            </div>
        </nav>
        
        <!-- 滑动面板 -->
        <div class="slide-panel" id="slidePanel" role="dialog" aria-modal="true" aria-labelledby="panelTitle" aria-hidden="true">
            <div class="panel-handle"></div>
            <div id="panelContent" role="document">
                <!-- 面板内容将通过JS动态添加 -->
            </div>
            <button class="action-button secondary w-full mt-4" onclick="closePanel()">
                <i class="fas fa-times"></i>
                <span>关闭</span>
            </button>
        </div>
    </div>
    
    <script>
        // 页面切换
        function switchPage(pageName) {
            console.log(`切换到页面: ${pageName}`);
            
            // 隐藏所有页面
            document.querySelectorAll('.page-content').forEach(page => {
                page.classList.add('hidden');
                page.setAttribute('aria-hidden', 'true');
            });
            
            // 显示目标页面
            const targetPage = document.getElementById(pageName + 'Page');
            if (!targetPage) {
                console.error(`页面 ${pageName} 不存在`);
                return;
            }
            targetPage.classList.remove('hidden');
            targetPage.setAttribute('aria-hidden', 'false');
            console.log(`已显示页面: ${pageName}Page`);
            
            // 更新导航状态 - 先移除所有激活状态，再添加到目标导航项
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                // 移除所有导航项的激活状态
                item.classList.remove('active');
                const icon = item.querySelector('i');
                const text = item.querySelector('span');
                if (icon) {
                    icon.classList.remove('text-blue-400');
                    icon.classList.add('text-gray-400');
                }
                if (text) {
                    text.classList.remove('text-blue-400');
                    text.classList.add('text-gray-400');
                }
                item.removeAttribute('aria-current');
            });
            
            // 查找并激活对应的导航项 - 使用更精确的选择器
            const targetNavItem = document.querySelector(`.nav-item[onclick*="switchPage('${pageName}')"]`);
            if (targetNavItem) {
                targetNavItem.classList.add('active');
                const icon = targetNavItem.querySelector('i');
                const text = targetNavItem.querySelector('span');
                if (icon) {
                    icon.classList.remove('text-gray-400');
                    icon.classList.add('text-blue-400');
                }
                if (text) {
                    text.classList.remove('text-gray-400');
                    text.classList.add('text-blue-400');
                }
                targetNavItem.setAttribute('aria-current', 'page');
                console.log(`已激活导航项:`, targetNavItem);
            } else {
                console.error(`找不到导航项: switchPage('${pageName}')`);
                // 备用方案：通过索引查找
                const pages = ['home', 'monitor', 'analysis', 'plans', 'settings'];
                const pageIndex = pages.indexOf(pageName);
                if (pageIndex !== -1) {
                    const navItemsArray = Array.from(document.querySelectorAll('.nav-item'));
                    if (navItemsArray[pageIndex]) {
                        navItemsArray[pageIndex].classList.add('active');
                        const icon = navItemsArray[pageIndex].querySelector('i');
                        const text = navItemsArray[pageIndex].querySelector('span');
                        if (icon) icon.classList.add('text-blue-400');
                        if (text) text.classList.add('text-blue-400');
                        navItemsArray[pageIndex].setAttribute('aria-current', 'page');
                    }
                }
            }
            
            // 将焦点设置到页面标题
            const pageTitle = targetPage.querySelector('h2, h3');
            if (pageTitle) {
                pageTitle.setAttribute('tabindex', '-1');
                pageTitle.focus();
            }
        }
        
        // 获取页面索引
        function getPageIndex(pageName) {
            const pages = ['home', 'monitor', 'analysis', 'plans', 'settings'];
            return pages.indexOf(pageName);
        }
        
        // 处理导航键盘事件
        function handleNavKeydown(event, pageName) {
            if (event.key === 'Enter' || event.key === ' ') {
                event.preventDefault();
                switchPage(pageName);
            } else if (event.key === 'ArrowLeft' || event.key === 'ArrowRight') {
                event.preventDefault();
                const pages = ['home', 'monitor', 'analysis', 'plans', 'settings'];
                const currentIndex = pages.indexOf(pageName);
                let newIndex;
                
                if (event.key === 'ArrowLeft') {
                    newIndex = currentIndex > 0 ? currentIndex - 1 : pages.length - 1;
                } else {
                    newIndex = currentIndex < pages.length - 1 ? currentIndex + 1 : 0;
                }
                
                const newNavItem = document.querySelector(`.nav-item[onclick*="${pages[newIndex]}"]`);
                if (newNavItem) {
                    newNavItem.focus();
                }
            }
        }
        
        // 切换监控状态
        function toggleMonitoring() {
            const toggle = document.getElementById('monitorToggle');
            const status = document.getElementById('monitorStatus');
            const detectionStatus = document.getElementById('detectionStatus');
            
            toggle.classList.toggle('active');
            
            if (toggle.classList.contains('active')) {
                status.textContent = '监控进行中...';
                detectionStatus.textContent = '检测中';
                detectionStatus.classList.add('text-green-400');
                detectionStatus.classList.remove('text-gray-400');
                
                // 模拟骨架点激活
                setTimeout(() => {
                    document.querySelectorAll('.keypoint-dot').forEach(dot => {
                        dot.classList.add('active');
                    });
                }, 1000);
                
                // 模拟动作检测
                simulateActionDetection();
            } else {
                status.textContent = '点击开关开始监控';
                detectionStatus.textContent = '未开始';
                detectionStatus.classList.remove('text-green-400');
                detectionStatus.classList.add('text-gray-400');
                
                // 重置骨架点
                document.querySelectorAll('.keypoint-dot').forEach(dot => {
                    dot.classList.remove('active');
                });
                
                // 重置动作信息
                document.getElementById('currentAction').textContent = '准备中';
                document.getElementById('actionScore').textContent = '0';
                document.getElementById('scoreProgress').style.width = '0%';
                document.getElementById('actionQuality').textContent = '-';
                resetQualityIndicators();
            }
        }
        
        // 模拟动作检测
        function simulateActionDetection() {
            const actions = ['直刺', '防守', '反击', '格挡', '劈砍'];
            const qualities = ['优秀', '良好', '一般', '较差'];
            let currentActionIndex = 0;
            
            const interval = setInterval(() => {
                const toggle = document.getElementById('monitorToggle');
                if (!toggle.classList.contains('active')) {
                    clearInterval(interval);
                    return;
                }
                
                // 更新动作名称
                const action = actions[currentActionIndex % actions.length];
                document.getElementById('currentAction').textContent = action;
                
                // 更新分数
                const score = Math.floor(Math.random() * 30) + 70; // 70-100分
                document.getElementById('actionScore').textContent = score;
                document.getElementById('scoreProgress').style.width = score + '%';
                
                // 更新质量
                const qualityIndex = Math.floor((100 - score) / 25); // 分数越高，质量越好
                const quality = qualities[Math.min(qualityIndex, qualities.length - 1)];
                document.getElementById('actionQuality').textContent = quality;
                
                // 更新质量指示器
                resetQualityIndicators();
                const qualityLevel = 5 - qualityIndex;
                for (let i = 0; i < qualityLevel; i++) {
                    document.getElementById(`quality${i + 1}`).classList.add('bg-gradient-to-r', 'from-blue-500', 'to-cyan-400');
                }
                
                currentActionIndex++;
            }, 3000);
        }
        
        // 重置质量指示器
        function resetQualityIndicators() {
            for (let i = 1; i <= 5; i++) {
                const indicator = document.getElementById(`quality${i}`);
                indicator.classList.remove('bg-gradient-to-r', 'from-blue-500', 'to-cyan-400');
                indicator.classList.add('bg-gray-700');
            }
        }
        
        // 文件选择处理
        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (file && file.type.startsWith('video/')) {
                // 显示上传进度
                document.getElementById('uploadArea').classList.add('hidden');
                document.getElementById('uploadProgress').classList.remove('hidden');
                
                // 模拟上传进度
                let progress = 0;
                const interval = setInterval(() => {
                    progress += 5;
                    document.getElementById('uploadProgressBar').style.width = progress + '%';
                    document.getElementById('uploadStatus').textContent = `上传中... ${progress}%`;
                    
                    if (progress >= 100) {
                        clearInterval(interval);
                        document.getElementById('uploadStatus').textContent = '上传完成，正在分析...';
                        
                        // 模拟分析完成后显示结果
                        setTimeout(() => {
                            showAnalysisResults();
                        }, 2000);
                    }
                }, 200);
            }
        }
        
        // 显示分析结果
        function showAnalysisResults() {
            document.getElementById('uploadProgress').classList.add('hidden');
            document.getElementById('analysisResults').classList.remove('hidden');
            
            // 生成动作列表
            const actionList = document.getElementById('actionList');
            const actions = [
                { name: '直刺', score: 85, time: '00:12' },
                { name: '防守', score: 78, time: '00:25' },
                { name: '反击', score: 92, time: '00:38' },
                { name: '格挡', score: 73, time: '00:51' },
                { name: '劈砍', score: 88, time: '01:05' }
            ];
            
            actionList.innerHTML = '';
            actions.forEach(action => {
                const actionItem = document.createElement('div');
                actionItem.className = 'flex items-center justify-between p-3 bg-gray-800/50 rounded-lg';
                actionItem.innerHTML = `
                    <span class="text-white font-medium">${action.name}</span>
                    <div class="text-right">
                        <span class="text-cyan-400 font-bold mr-3">${action.score}</span>
                        <span class="text-gray-400 text-sm">${action.time}</span>
                    </div>
                `;
                actionList.appendChild(actionItem);
            });
        }
        
        // 切换语音设置
        function toggleVoice() {
            document.getElementById('voiceToggle').classList.toggle('active');
        }
        
        // 切换震动设置
        function toggleVibration() {
            document.getElementById('vibrationToggle').classList.toggle('active');
        }
        
        // 切换同步设置
        function toggleSync() {
            document.getElementById('syncToggle').classList.toggle('active');
        }
        
        // 打开滑动面板
        function openPanel(content) {
            document.getElementById('panelContent').innerHTML = content;
            const panel = document.getElementById('slidePanel');
            panel.classList.add('active');
            panel.setAttribute('aria-hidden', 'false');
            
            // 为面板内容添加标题，如果没有的话
            const titleElement = document.querySelector('#panelContent h3, #panelContent h2, #panelContent h1');
            if (titleElement && !titleElement.id) {
                titleElement.id = 'panelTitle';
            }
            
            // 设置焦点到面板内容
            setTimeout(() => {
                const firstFocusable = document.querySelector('#panelContent button, #panelContent input, #panelContent [tabindex="0"]');
                if (firstFocusable) {
                    firstFocusable.focus();
                }
            }, 100);
            
            // 添加ESC键关闭面板
            document.addEventListener('keydown', handlePanelEscape);
        }
        
        // 关闭滑动面板
        function closePanel() {
            const panel = document.getElementById('slidePanel');
            panel.classList.remove('active');
            panel.setAttribute('aria-hidden', 'true');
            
            // 移除ESC键事件监听
            document.removeEventListener('keydown', handlePanelEscape);
            
            // 返回焦点到触发元素
            const activeNavItem = document.querySelector('.nav-item.active');
            if (activeNavItem) {
                activeNavItem.focus();
            }
        }
        
        // 处理面板ESC键
        function handlePanelEscape(e) {
            if (e.key === 'Escape') {
                closePanel();
            }
        }
        
        // 其他功能函数
        function startQuickTraining() {
            switchPage('monitor');
            // 确保页面切换完成后再执行后续操作
            setTimeout(() => {
                const monitorToggle = document.getElementById('monitorToggle');
                const monitorStatus = document.getElementById('monitorStatus');
                const detectionStatus = document.getElementById('detectionStatus');
                
                if (monitorToggle) {
                    monitorToggle.classList.add('active');
                }
                if (monitorStatus) {
                    monitorStatus.textContent = '监控进行中...';
                }
                if (detectionStatus) {
                    detectionStatus.textContent = '检测中';
                    detectionStatus.classList.add('text-green-400');
                }
                
                simulateActionDetection();
            }, 300); // 给页面切换留出足够时间
        }
        
        function viewHistory() {
            openPanel(`
                <h3 class="text-lg font-semibold text-white mb-4">训练历史</h3>
                <div class="space-y-3">
                    <div class="p-3 bg-gray-800/50 rounded-lg">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-white font-medium">综合训练</span>
                            <span class="text-gray-400 text-sm">今天 14:30</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-cyan-400 font-bold">85分</span>
                            <button class="text-blue-400 text-sm">查看详情</button>
                        </div>
                    </div>
                    <div class="p-3 bg-gray-800/50 rounded-lg">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-white font-medium">基础剑法</span>
                            <span class="text-gray-400 text-sm">昨天 19:15</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-cyan-400 font-bold">78分</span>
                            <button class="text-blue-400 text-sm">查看详情</button>
                        </div>
                    </div>
                    <div class="p-3 bg-gray-800/50 rounded-lg">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-white font-medium">进阶技巧</span>
                            <span class="text-gray-400 text-sm">3天前</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-cyan-400 font-bold">82分</span>
                            <button class="text-blue-400 text-sm">查看详情</button>
                        </div>
                    </div>
                </div>
            `);
        }
        
        function continueTraining() {
            switchPage('monitor');
            // 确保页面切换完成后再执行后续操作
            setTimeout(() => {
                const monitorToggle = document.getElementById('monitorToggle');
                const monitorStatus = document.getElementById('monitorStatus');
                const detectionStatus = document.getElementById('detectionStatus');
                
                if (monitorToggle) {
                    monitorToggle.classList.add('active');
                }
                if (monitorStatus) {
                    monitorStatus.textContent = '监控进行中...';
                }
                if (detectionStatus) {
                    detectionStatus.textContent = '检测中';
                    detectionStatus.classList.add('text-green-400');
                }
                
                simulateActionDetection();
            }, 300); // 给页面切换留出足够时间
        }
        
        function selectPlan(planType) {
            const planNames = {
                'advanced': '进阶剑法训练',
                'competition': '比赛备战训练'
            };
            
            openPanel(`
                <h3 class="text-lg font-semibold text-white mb-4">确认选择</h3>
                <p class="text-gray-300 mb-6">确定要选择"${planNames[planType]}"计划吗？这将替换当前的训练计划。</p>
                <div class="flex space-x-3">
                    <button class="action-button flex-1" onclick="confirmSelectPlan('${planType}')">
                        <i class="fas fa-check"></i>
                        <span>确认</span>
                    </button>
                    <button class="action-button secondary flex-1" onclick="closePanel()">
                        <i class="fas fa-times"></i>
                        <span>取消</span>
                    </button>
                </div>
            `);
        }
        
        function confirmSelectPlan(planType) {
            closePanel();
            // 这里可以添加实际的选择计划逻辑
            openPanel(`
                <div class="text-center py-8">
                    <i class="fas fa-check-circle text-5xl text-green-400 mb-4"></i>
                    <h3 class="text-lg font-semibold text-white mb-2">计划选择成功</h3>
                    <p class="text-gray-300">新训练计划已激活，可在首页查看。</p>
                </div>
            `);
            
            // 确保面板关闭后再切换页面
            setTimeout(() => {
                closePanel();
                setTimeout(() => {
                    switchPage('plans');
                }, 300); // 给面板关闭留出足够时间
            }, 1500);
        }
        
        function scanDevices() {
            openPanel(`
                <h3 class="text-lg font-semibold text-white mb-4">扫描蓝牙设备</h3>
                <div class="flex items-center justify-center py-8">
                    <div class="text-center">
                        <i class="fas fa-bluetooth text-4xl text-blue-400 mb-4 animate-pulse"></i>
                        <p class="text-gray-300">正在扫描附近的设备...</p>
                    </div>
                </div>
            `);
            
            // 模拟扫描结果
            setTimeout(() => {
                openPanel(`
                    <h3 class="text-lg font-semibold text-white mb-4">发现设备</h3>
                    <div class="space-y-3">
                        <div class="p-3 bg-gray-800/50 rounded-lg flex justify-between items-center">
                            <div>
                                <p class="text-white font-medium">WT901BLE67</p>
                                <p class="text-gray-400 text-sm">信号强度: 85%</p>
                            </div>
                            <button class="text-blue-400 text-sm" onclick="connectDevice('WT901BLE67')">连接</button>
                        </div>
                        <div class="p-3 bg-gray-800/50 rounded-lg flex justify-between items-center">
                            <div>
                                <p class="text-white font-medium">DL01</p>
                                <p class="text-gray-400 text-sm">信号强度: 62%</p>
                            </div>
                            <button class="text-blue-400 text-sm" onclick="connectDevice('DL01')">连接</button>
                        </div>
                    </div>
                `);
            }, 2000);
        }
        
        function connectDevice(deviceName) {
            openPanel(`
                <div class="text-center py-8">
                    <i class="fas fa-spinner fa-spin text-4xl text-blue-400 mb-4"></i>
                    <p class="text-gray-300">正在连接到 ${deviceName}...</p>
                </div>
            `);
            
            // 模拟连接结果
            setTimeout(() => {
                document.getElementById('bluetoothStatus').textContent = deviceName;
                document.getElementById('connectionStatus').classList.add('active');
                document.getElementById('connectionText').textContent = '已连接';
                
                openPanel(`
                    <div class="text-center py-8">
                        <i class="fas fa-check-circle text-5xl text-green-400 mb-4"></i>
                        <h3 class="text-lg font-semibold text-white mb-2">连接成功</h3>
                        <p class="text-gray-300">已成功连接到 ${deviceName}</p>
                    </div>
                `);
                
                setTimeout(() => {
                    closePanel();
                }, 2000);
            }, 1500);
        }
        
        function exportData() {
            openPanel(`
                <div class="text-center py-8">
                    <i class="fas fa-download text-4xl text-blue-400 mb-4"></i>
                    <h3 class="text-lg font-semibold text-white mb-2">导出训练数据</h3>
                    <p class="text-gray-300 mb-6">选择要导出的数据类型</p>
                    <div class="space-y-3">
                        <button class="action-button secondary w-full" onclick="exportDataByType('all')">
                            <i class="fas fa-database"></i>
                            <span>全部数据</span>
                        </button>
                        <button class="action-button secondary w-full" onclick="exportDataByType('recent')">
                            <i class="fas fa-calendar-week"></i>
                            <span>最近30天</span>
                        </button>
                        <button class="action-button secondary w-full" onclick="exportDataByType('summary')">
                            <i class="fas fa-chart-pie"></i>
                            <span>统计摘要</span>
                        </button>
                    </div>
                </div>
            `);
        }
        
        function exportDataByType(type) {
            openPanel(`
                <div class="text-center py-8">
                    <i class="fas fa-spinner fa-spin text-4xl text-blue-400 mb-4"></i>
                    <p class="text-gray-300">正在导出数据...</p>
                </div>
            `);
            
            setTimeout(() => {
                openPanel(`
                    <div class="text-center py-8">
                        <i class="fas fa-check-circle text-5xl text-green-400 mb-4"></i>
                        <h3 class="text-lg font-semibold text-white mb-2">导出成功</h3>
                        <p class="text-gray-300">数据已导出到下载文件夹</p>
                    </div>
                `);
                
                setTimeout(() => {
                    closePanel();
                }, 2000);
            }, 2000);
        }
        
        function showAbout() {
            openPanel(`
                <div class="text-center py-8">
                    <i class="fas fa-info-circle text-5xl text-blue-400 mb-4"></i>
                    <h3 class="text-lg font-semibold text-white mb-2">剑客训练助手</h3>
                    <p class="text-gray-300 mb-2">版本 1.0.0</p>
                    <p class="text-gray-400 text-sm mb-4">智能剑术训练分析与指导系统</p>
                    <p class="text-gray-500 text-xs">© 2023 剑客科技有限公司</p>
                </div>
            `);
        }
        
        function showHelp() {
            openPanel(`
                <h3 class="text-lg font-semibold text-white mb-4">帮助与支持</h3>
                <div class="space-y-4">
                    <div class="p-3 bg-gray-800/50 rounded-lg">
                        <h4 class="text-white font-medium mb-2">快速入门</h4>
                        <p class="text-gray-400 text-sm">了解如何连接设备并开始您的第一次训练</p>
                        <button class="text-blue-400 text-sm mt-2">查看指南</button>
                    </div>
                    <div class="p-3 bg-gray-800/50 rounded-lg">
                        <h4 class="text-white font-medium mb-2">常见问题</h4>
                        <p class="text-gray-400 text-sm">查找常见问题的解答和使用技巧</p>
                        <button class="text-blue-400 text-sm mt-2">浏览FAQ</button>
                    </div>
                    <div class="p-3 bg-gray-800/50 rounded-lg">
                        <h4 class="text-white font-medium mb-2">联系支持</h4>
                        <p class="text-gray-400 text-sm">遇到问题？我们的技术支持团队随时为您服务</p>
                        <button class="text-blue-400 text-sm mt-2">发送反馈</button>
                    </div>
                </div>
            `);
        }
        
        function changeNetwork() {
            openPanel(`
                <h3 class="text-lg font-semibold text-white mb-4">网络设置</h3>
                <div class="space-y-3">
                    <div class="p-3 bg-gray-800/50 rounded-lg flex justify-between items-center">
                        <div>
                            <p class="text-white font-medium">家庭WiFi</p>
                            <p class="text-gray-400 text-sm">信号强度: 95%</p>
                        </div>
                        <div class="w-3 h-3 bg-green-400 rounded-full"></div>
                    </div>
                    <div class="p-3 bg-gray-800/50 rounded-lg flex justify-between items-center">
                        <div>
                            <p class="text-white font-medium">办公室WiFi</p>
                            <p class="text-gray-400 text-sm">信号强度: 78%</p>
                        </div>
                        <div class="w-3 h-3 bg-yellow-400 rounded-full"></div>
                    </div>
                    <div class="p-3 bg-gray-800/50 rounded-lg flex justify-between items-center">
                        <div>
                            <p class="text-white font-medium">移动数据</p>
                            <p class="text-gray-400 text-sm">信号强度: 65%</p>
                        </div>
                        <div class="w-3 h-3 bg-blue-400 rounded-full"></div>
                    </div>
                </div>
                <button class="action-button w-full mt-4" onclick="addNewNetwork()">
                    <i class="fas fa-plus"></i>
                    <span>添加新网络</span>
                </button>
            `);
        }
        
        function addNewNetwork() {
            openPanel(`
                <h3 class="text-lg font-semibold text-white mb-4">添加新网络</h3>
                <div class="space-y-4">
                    <div>
                        <label class="text-gray-300 text-sm block mb-2">网络名称</label>
                        <input type="text" class="w-full p-3 bg-gray-800/50 border border-gray-700 rounded-lg text-white" placeholder="输入WiFi名称">
                    </div>
                    <div>
                        <label class="text-gray-300 text-sm block mb-2">密码</label>
                        <input type="password" class="w-full p-3 bg-gray-800/50 border border-gray-700 rounded-lg text-white" placeholder="输入密码">
                    </div>
                </div>
                <div class="flex space-x-3 mt-6">
                    <button class="action-button flex-1" onclick="connectNewNetwork()">
                        <i class="fas fa-wifi"></i>
                        <span>连接</span>
                    </button>
                    <button class="action-button secondary flex-1" onclick="closePanel()">
                        <i class="fas fa-times"></i>
                        <span>取消</span>
                    </button>
                </div>
            `);
        }
        
        function connectNewNetwork() {
            openPanel(`
                <div class="text-center py-8">
                    <i class="fas fa-spinner fa-spin text-4xl text-blue-400 mb-4"></i>
                    <p class="text-gray-300">正在连接到网络...</p>
                </div>
            `);
            
            setTimeout(() => {
                openPanel(`
                    <div class="text-center py-8">
                        <i class="fas fa-check-circle text-5xl text-green-400 mb-4"></i>
                        <h3 class="text-lg font-semibold text-white mb-2">连接成功</h3>
                        <p class="text-gray-300">已成功连接到新网络</p>
                    </div>
                `);
                
                setTimeout(() => {
                    closePanel();
                }, 2000);
            }, 1500);
        }
        
        function toggleAutoSave() {
            const toggle = document.getElementById('autoSaveToggle');
            toggle.classList.toggle('active');
            
            // 保存设置到本地存储
            const autoSaveEnabled = toggle.classList.contains('active');
            localStorage.setItem('autoSaveEnabled', autoSaveEnabled);
            
            // 显示提示
            showToast(autoSaveEnabled ? '自动保存已开启' : '自动保存已关闭');
        }
        
        function toggleAnalytics() {
            const toggle = document.getElementById('analyticsToggle');
            toggle.classList.toggle('active');
            
            // 保存设置到本地存储
            const analyticsEnabled = toggle.classList.contains('active');
            localStorage.setItem('analyticsEnabled', analyticsEnabled);
            
            // 显示提示
            showToast(analyticsEnabled ? '数据分析已开启' : '数据分析已关闭');
        }
        
        function showToast(message) {
            // 创建提示元素
            const toast = document.createElement('div');
            toast.className = 'fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg z-50 transition-opacity duration-300';
            toast.textContent = message;
            
            // 添加到页面
            document.body.appendChild(toast);
            
            // 显示动画
            setTimeout(() => {
                toast.style.opacity = '1';
            }, 10);
            
            // 3秒后移除
            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, 3000);
        }
        
        // 初始化设备状态指示器
        function initDeviceStatus() {
            const indicator = document.getElementById('deviceStatusIndicator');
            const statusText = document.getElementById('deviceStatusText');
            
            // 检查是否有已连接的设备
            const connectedDevice = localStorage.getItem('connectedDevice');
            
            if (connectedDevice) {
                indicator.className = 'w-2 h-2 rounded-full mr-2 bg-green-500';
                statusText.textContent = connectedDevice;
                statusText.className = 'text-sm text-green-400';
            } else {
                indicator.className = 'w-2 h-2 rounded-full mr-2 bg-red-500';
                statusText.textContent = '未连接';
                statusText.className = 'text-sm text-red-400';
            }
        }
        
        // 添加涟漪效果
        function addRippleEffect(element, event) {
            const ripple = document.createElement('span');
            ripple.classList.add('ripple');
            
            const rect = element.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = event.clientX - rect.left - size / 2;
            const y = event.clientY - rect.top - size / 2;
            
            ripple.style.width = ripple.style.height = size + 'px';
            ripple.style.left = x + 'px';
            ripple.style.top = y + 'px';
            
            element.appendChild(ripple);
            
            setTimeout(() => {
                ripple.remove();
            }, 600);
        }
        
        // 键盘导航支持
        document.addEventListener('DOMContentLoaded', function() {
            // 为所有按钮添加涟漪效果
            const buttons = document.querySelectorAll('.action-button, .list-button, .quick-action-card');
            buttons.forEach(button => {
                button.addEventListener('click', function(e) {
                    addRippleEffect(this, e);
                });
                
                // 添加键盘支持
                button.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        this.click();
                    }
                });
            });
            
            // 为导航项添加键盘支持
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                // 添加新的事件监听器
                item.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        this.click();
                    } else if (e.key === 'ArrowRight' || e.key === 'ArrowLeft') {
                        e.preventDefault();
                        const currentIndex = Array.from(navItems).indexOf(this);
                        let nextIndex;
                        
                        if (e.key === 'ArrowRight') {
                            nextIndex = (currentIndex + 1) % navItems.length;
                        } else {
                            nextIndex = (currentIndex - 1 + navItems.length) % navItems.length;
                        }
                        
                        navItems[nextIndex].focus();
                    }
                });
            });
            
            // 为开关按钮添加键盘支持
            const toggleButtons = document.querySelectorAll('.toggle-button');
            toggleButtons.forEach(toggle => {
                toggle.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        this.click();
                    }
                });
                
                // 确保开关按钮可以获得焦点
                if (!toggle.hasAttribute('tabindex')) {
                    toggle.setAttribute('tabindex', '0');
                }
            });
            
            // 页面切换动画
            const pages = document.querySelectorAll('.page');
            pages.forEach((page, index) => {
                setTimeout(() => {
                    page.classList.add('active');
                }, index * 100);
            });
            
            // 卡片进入动画
            const cards = document.querySelectorAll('.card, .quick-action-card, .stat-card-mini, .training-record-card');
            cards.forEach((card, index) => {
                setTimeout(() => {
                    card.classList.add('card-entrance');
                }, index * 50);
            });
            
            // 数字变化动画
            const statValues = document.querySelectorAll('.stat-value');
            statValues.forEach(value => {
                const finalValue = value.textContent;
                const isNumeric = !isNaN(finalValue);
                
                if (isNumeric) {
                    const numValue = parseInt(finalValue);
                    let currentValue = 0;
                    const increment = Math.ceil(numValue / 20);
                    
                    const counter = setInterval(() => {
                        currentValue += increment;
                        if (currentValue >= numValue) {
                            currentValue = numValue;
                            clearInterval(counter);
                        }
                        value.textContent = currentValue;
                    }, 50);
                }
                
                value.classList.add('count-animation');
            });
            
            // 进度条动画
            const progressBars = document.querySelectorAll('.progress-fill[role="progressbar"]');
            progressBars.forEach(bar => {
                const width = bar.style.width || bar.getAttribute('data-width') || '0%';
                const value = parseInt(width);
                bar.style.width = '0%';
                bar.setAttribute('aria-valuenow', '0');
                
                setTimeout(() => {
                    bar.style.width = width;
                    bar.setAttribute('aria-valuenow', value.toString());
                }, 300);
            });
            
            // 添加工具提示
            const tooltips = document.querySelectorAll('[data-tooltip]');
            tooltips.forEach(tooltip => {
                tooltip.classList.add('tooltip');
            });
            
            // 初始化开关按钮
            const toggles = document.querySelectorAll('.toggle-switch');
            toggles.forEach(toggle => {
                toggle.addEventListener('click', function() {
                    this.classList.toggle('active');
                });
            });
        });
        
        // 页面切换函数已在前面定义，此处删除重复定义
        
        // 显示加载状态
        function showLoading(element) {
            element.classList.add('button-loading');
            element.disabled = true;
        }
        
        // 隐藏加载状态
        function hideLoading(element) {
            element.classList.remove('button-loading');
            element.disabled = false;
        }
        
        // 显示成功提示
        function showSuccessToast(message) {
            showToast(message, 'success');
        }
        
        // 显示错误提示
        function showErrorToast(message) {
            showToast(message, 'error');
        }
        
        // 修改原有的showToast函数以支持不同类型
        function showToast(message, type = 'info') {
            // 创建提示元素
            const toast = document.createElement('div');
            toast.className = `fixed bottom-20 left-1/2 transform -translate-x-1/2 px-4 py-2 rounded-lg shadow-lg z-50 transition-all duration-300 toast-enter`;
            
            // 根据类型设置样式
            switch(type) {
                case 'success':
                    toast.classList.add('bg-green-600', 'text-white');
                    break;
                case 'error':
                    toast.classList.add('bg-red-600', 'text-white');
                    break;
                default:
                    toast.classList.add('bg-gray-800', 'text-white');
            }
            
            toast.textContent = message;
            
            // 添加到页面
            document.body.appendChild(toast);
            
            // 显示动画
            setTimeout(() => {
                toast.style.opacity = '1';
            }, 10);
            
            // 3秒后移除
            setTimeout(() => {
                toast.classList.remove('toast-enter');
                toast.classList.add('toast-exit');
                
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, 3000);
        }
        
        // 添加页面滚动效果
        function addScrollEffect() {
            const contentArea = document.querySelector('.content-area');
            const header = document.querySelector('.header-enhanced');
            const bottomNav = document.querySelector('.bottom-nav');
            let lastScrollTop = 0;
            
            contentArea.addEventListener('scroll', function() {
                const scrollTop = this.scrollTop;
                
                if (scrollTop > lastScrollTop && scrollTop > 50) {
                    // 向下滚动
                    header.style.transform = 'translateY(-100%)';
                    bottomNav.style.transform = 'translateX(-50%) translateY(100%)';
                } else {
                    // 向上滚动
                    header.style.transform = 'translateY(0)';
                    bottomNav.style.transform = 'translateX(-50%) translateY(0)';
                }
                
                lastScrollTop = scrollTop;
            });
        }
        
        // 初始化滚动效果
        document.addEventListener('DOMContentLoaded', function() {
            addScrollEffect();
        });
            // 初始化设备状态
            initDeviceStatus();
            
            // 恢复设置状态
            const autoSaveEnabled = localStorage.getItem('autoSaveEnabled') === 'true';
            const analyticsEnabled = localStorage.getItem('analyticsEnabled') === 'true';
            
            if (autoSaveEnabled) {
                document.getElementById('autoSaveToggle').classList.add('active');
            }
            
            if (analyticsEnabled) {
                document.getElementById('analyticsToggle').classList.add('active');
            }
            
            // 恢复头像设置
            const savedAvatar = localStorage.getItem('userAvatar');
            if (savedAvatar) {
                document.getElementById('userAvatar').innerHTML = savedAvatar;
            };
        
        function logout() {
            if (confirm('确定要退出登录吗？')) {
                // 这里可以添加实际的登出逻辑
                alert('已退出登录');
            }
        }
        
        function changeAvatar() {
            openPanel(`
                <h3 class="text-lg font-semibold text-white mb-4">更换头像</h3>
                <div class="space-y-4">
                    <p class="text-gray-300">选择您喜欢的头像样式:</p>
                    <div class="grid grid-cols-3 gap-4">
                        <button class="p-4 bg-gray-800/50 rounded-lg flex flex-col items-center" onclick="selectAvatar('user')">
                            <i class="fas fa-user text-3xl text-blue-400 mb-2"></i>
                            <span class="text-gray-300 text-sm">默认</span>
                        </button>
                        <button class="p-4 bg-gray-800/50 rounded-lg flex flex-col items-center" onclick="selectAvatar('user-ninja')">
                            <i class="fas fa-user-ninja text-3xl text-purple-400 mb-2"></i>
                            <span class="text-gray-300 text-sm">忍者</span>
                        </button>
                        <button class="p-4 bg-gray-800/50 rounded-lg flex flex-col items-center" onclick="selectAvatar('user-astronaut')">
                            <i class="fas fa-user-astronaut text-3xl text-indigo-400 mb-2"></i>
                            <span class="text-gray-300 text-sm">宇航员</span>
                        </button>
                        <button class="p-4 bg-gray-800/50 rounded-lg flex flex-col items-center" onclick="selectAvatar('user-secret')">
                            <i class="fas fa-user-secret text-3xl text-green-400 mb-2"></i>
                            <span class="text-gray-300 text-sm">特工</span>
                        </button>
                        <button class="p-4 bg-gray-800/50 rounded-lg flex flex-col items-center" onclick="selectAvatar('user-tie')">
                            <i class="fas fa-user-tie text-3xl text-cyan-400 mb-2"></i>
                            <span class="text-gray-300 text-sm">正装</span>
                        </button>
                        <button class="p-4 bg-gray-800/50 rounded-lg flex flex-col items-center" onclick="selectAvatar('user-graduate')">
                            <i class="fas fa-user-graduate text-3xl text-yellow-400 mb-2"></i>
                            <span class="text-gray-300 text-sm">学士</span>
                        </button>
                    </div>
                    <div class="pt-4 border-t border-gray-700">
                        <button class="action-button secondary w-full" onclick="uploadCustomAvatar()">
                            <i class="fas fa-upload"></i>
                            <span>上传自定义头像</span>
                        </button>
                    </div>
                </div>
            `);
        }
        
        function selectAvatar(iconType) {
            const avatarElement = document.getElementById('userAvatar');
            const welcomeAvatarElement = document.getElementById('welcomeAvatar');
            
            // 更新设置页面头像
            avatarElement.innerHTML = `<i class="fas fa-${iconType} text-2xl"></i>
                <button class="absolute bottom-0 right-0 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs" onclick="changeAvatar()">
                    <i class="fas fa-camera"></i>
                </button>`;
            
            // 更新欢迎页面头像
            if (welcomeAvatarElement) {
                welcomeAvatarElement.innerHTML = `<i class="fas fa-${iconType} text-2xl"></i>`;
            }
            
            // 保存到本地存储
            localStorage.setItem('userAvatar', iconType);
            
            closePanel();
            
            openPanel(`
                <div class="text-center py-8">
                    <i class="fas fa-check-circle text-5xl text-green-400 mb-4"></i>
                    <h3 class="text-lg font-semibold text-white mb-2">头像更换成功</h3>
                    <p class="text-gray-300">您的头像已更新</p>
                </div>
            `);
            
            setTimeout(() => {
                closePanel();
            }, 2000);
        }
        
        function uploadCustomAvatar() {
            openPanel(`
                <div class="text-center py-8">
                    <i class="fas fa-image text-4xl text-blue-400 mb-4"></i>
                    <h3 class="text-lg font-semibold text-white mb-2">上传自定义头像</h3>
                    <p class="text-gray-300 mb-6">此功能将在后续版本中提供</p>
                    <button class="action-button w-full" onclick="closePanel()">
                        <i class="fas fa-check"></i>
                        <span>我知道了</span>
                    </button>
                </div>
            `);
        }
        
        function editProfile() {
            openPanel(`
                <h3 class="text-lg font-semibold text-white mb-4">编辑个人资料</h3>
                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-300 text-sm mb-2">用户名</label>
                        <input type="text" value="剑客001" class="w-full p-3 bg-gray-800/50 text-white rounded-lg border border-gray-700 focus:border-blue-500 focus:outline-none">
                    </div>
                    <div>
                        <label class="block text-gray-300 text-sm mb-2">训练等级</label>
                        <select class="w-full p-3 bg-gray-800/50 text-white rounded-lg border border-gray-700 focus:border-blue-500 focus:outline-none">
                            <option>初级训练者</option>
                            <option selected>中级训练者</option>
                            <option>高级训练者</option>
                            <option>专业选手</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-gray-300 text-sm mb-2">个人简介</label>
                        <textarea class="w-full p-3 bg-gray-800/50 text-white rounded-lg border border-gray-700 focus:border-blue-500 focus:outline-none" rows="3" placeholder="介绍一下自己..."></textarea>
                    </div>
                    <div class="flex space-x-3 pt-4">
                        <button class="action-button flex-1" onclick="saveProfile()">
                            <i class="fas fa-save"></i>
                            <span>保存</span>
                        </button>
                        <button class="action-button secondary flex-1" onclick="closePanel()">
                            <i class="fas fa-times"></i>
                            <span>取消</span>
                        </button>
                    </div>
                </div>
            `);
        }
        
        function saveProfile() {
            closePanel();
            
            openPanel(`
                <div class="text-center py-8">
                    <i class="fas fa-check-circle text-5xl text-green-400 mb-4"></i>
                    <h3 class="text-lg font-semibold text-white mb-2">保存成功</h3>
                    <p class="text-gray-300">您的个人资料已更新</p>
                </div>
            `);
            
            setTimeout(() => {
                closePanel();
            }, 2000);
        }
        
        // 页面加载时恢复头像设置
        document.addEventListener('DOMContentLoaded', function() {
            const savedAvatar = localStorage.getItem('userAvatar');
            if (savedAvatar) {
                const avatarElement = document.getElementById('userAvatar');
                const welcomeAvatarElement = document.getElementById('welcomeAvatar');
                
                if (avatarElement) {
                    avatarElement.innerHTML = `<i class="fas fa-${savedAvatar} text-2xl"></i>
                        <button class="absolute bottom-0 right-0 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs" onclick="changeAvatar()">
                            <i class="fas fa-camera"></i>
                        </button>`;
                }
                
                if (welcomeAvatarElement) {
                    welcomeAvatarElement.innerHTML = `<i class="fas fa-${savedAvatar} text-2xl"></i>`;
                }
            }
        });
        
        function toggleSettings() {
            switchPage('settings');
        }
        
        function downloadReport(format) {
            openPanel(`
                <div class="text-center py-8">
                    <i class="fas fa-spinner fa-spin text-4xl text-blue-400 mb-4"></i>
                    <p class="text-gray-300">正在生成${format.toUpperCase()}报告...</p>
                </div>
            `);
            
            setTimeout(() => {
                openPanel(`
                    <div class="text-center py-8">
                        <i class="fas fa-check-circle text-5xl text-green-400 mb-4"></i>
                        <h3 class="text-lg font-semibold text-white mb-2">报告生成成功</h3>
                        <p class="text-gray-300 mb-4">训练报告已准备就绪</p>
                        <div class="bg-gray-800/50 p-4 rounded-lg text-left mb-4">
                            <p class="text-white font-medium mb-2">报告包含:</p>
                            <ul class="text-gray-300 text-sm space-y-1">
                                <li>• 综合评分与技术分析</li>
                                <li>• 动作识别与评估</li>
                                <li>• 训练数据统计</li>
                                <li>• 个性化改进建议</li>
                            </ul>
                        </div>
                        <button class="action-button w-full" onclick="closePanel()">
                            <i class="fas fa-check"></i>
                            <span>完成</span>
                        </button>
                    </div>
                `);
            }, 2000);
        }
        
        function shareResults() {
            openPanel(`
                <div class="text-center py-4">
                    <h3 class="text-lg font-semibold text-white mb-4">分享训练结果</h3>
                    <p class="text-gray-300 mb-6">选择分享方式</p>
                    <div class="grid grid-cols-2 gap-3">
                        <button class="action-button secondary" onclick="shareToSocial('wechat')">
                            <i class="fab fa-weixin"></i>
                            <span>微信</span>
                        </button>
                        <button class="action-button secondary" onclick="shareToSocial('weibo')">
                            <i class="fab fa-weibo"></i>
                            <span>微博</span>
                        </button>
                        <button class="action-button secondary" onclick="shareToSocial('qq')">
                            <i class="fab fa-qq"></i>
                            <span>QQ</span>
                        </button>
                        <button class="action-button secondary" onclick="copyShareLink()">
                            <i class="fas fa-link"></i>
                            <span>复制链接</span>
                        </button>
                    </div>
                    <div class="mt-6 bg-gray-800/50 p-4 rounded-lg">
                        <p class="text-gray-300 text-sm">分享后将展示:</p>
                        <p class="text-white font-medium mt-1">今日训练评分: 86分</p>
                        <p class="text-gray-400 text-sm">包含动作分析和技术评估</p>
                    </div>
                </div>
            `);
        }
        
        function shareToSocial(platform) {
            const platformNames = {
                'wechat': '微信',
                'weibo': '微博',
                'qq': 'QQ'
            };
            
            openPanel(`
                <div class="text-center py-8">
                    <i class="fas fa-share-alt text-4xl text-blue-400 mb-4"></i>
                    <h3 class="text-lg font-semibold text-white mb-2">分享到${platformNames[platform]}</h3>
                    <p class="text-gray-300 mb-4">训练结果已准备分享</p>
                    <div class="bg-gray-800/50 p-4 rounded-lg text-left mb-4">
                        <p class="text-white font-medium mb-2">分享内容:</p>
                        <p class="text-gray-300 text-sm">今天完成了剑术训练，综合评分86分！动作准确性和反应速度表现优秀，继续加油！#剑术训练 #SwordEdge</p>
                    </div>
                    <div class="flex space-x-3">
                        <button class="action-button flex-1" onclick="confirmShare('${platform}')">
                            <i class="fas fa-share"></i>
                            <span>确认分享</span>
                        </button>
                        <button class="action-button secondary flex-1" onclick="closePanel()">
                            <i class="fas fa-times"></i>
                            <span>取消</span>
                        </button>
                    </div>
                </div>
            `);
        }
        
        function copyShareLink() {
            openPanel(`
                <div class="text-center py-8">
                    <i class="fas fa-check-circle text-5xl text-green-400 mb-4"></i>
                    <h3 class="text-lg font-semibold text-white mb-2">链接已复制</h3>
                    <p class="text-gray-300">分享链接已复制到剪贴板</p>
                    <div class="bg-gray-800/50 p-3 rounded-lg mt-4">
                        <p class="text-gray-400 text-xs truncate">https://swordedge.app/share/training/abc123def456</p>
                    </div>
                </div>
            `);
            
            setTimeout(() => {
                closePanel();
            }, 2000);
        }
        
        function confirmShare(platform) {
            openPanel(`
                <div class="text-center py-8">
                    <i class="fas fa-check-circle text-5xl text-green-400 mb-4"></i>
                    <h3 class="text-lg font-semibold text-white mb-2">分享成功</h3>
                    <p class="text-gray-300">训练结果已分享</p>
                </div>
            `);
            
            setTimeout(() => {
                closePanel();
            }, 2000);
        }
        
        // 初始化页面
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化响应式可访问性
            initializeResponsiveAccessibility();
            
            // 初始化焦点管理
            initializeFocusManagement();
            
            // 设置拖拽上传
            const dropZone = document.getElementById('dropZone');
            
            // 为拖放区域添加键盘支持
            dropZone.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    // 触发文件选择
                    document.getElementById('fileInput').click();
                }
            });
            
            dropZone.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.classList.add('border-blue-500');
            });
            
            dropZone.addEventListener('dragleave', function(e) {
                e.preventDefault();
                this.classList.remove('border-blue-500');
            });
            
            dropZone.addEventListener('drop', function(e) {
                e.preventDefault();
                this.classList.remove('border-blue-500');
                
                const files = e.dataTransfer.files;
                if (files.length > 0 && files[0].type.startsWith('video/')) {
                    handleFileSelect({ target: { files: [files[0]] } });
                }
            });
        });
        
        // 初始化响应式可访问性
        function initializeResponsiveAccessibility() {
            // 检测设备类型并调整UI
            detectDeviceType();
            
            // 监听方向变化
            window.addEventListener('orientationchange', handleOrientationChange);
            window.addEventListener('resize', handleResize);
            
            // 检测触摸设备
            detectTouchDevice();
            
            // 检测高分辨率屏幕
            detectHighResolutionScreen();
            
            // 检测用户偏好设置
            detectUserPreferences();
            
            // 初始化响应式焦点管理
            initializeResponsiveFocusManagement();
            
            // 初始化响应式ARIA标签
            initializeResponsiveARIA();
        }
        
        // 检测设备类型
        function detectDeviceType() {
            const width = window.innerWidth;
            const isSmallScreen = width <= 320;
            const isMediumScreen = width > 320 && width < 768;
            const isLargeScreen = width >= 768;
            
            // 添加设备类型类到body
            document.body.classList.remove('small-screen', 'medium-screen', 'large-screen');
            
            if (isSmallScreen) {
                document.body.classList.add('small-screen');
                adjustForSmallScreen();
            } else if (isMediumScreen) {
                document.body.classList.add('medium-screen');
                adjustForMediumScreen();
            } else if (isLargeScreen) {
                document.body.classList.add('large-screen');
                adjustForLargeScreen();
            }
        }
        
        // 小屏幕适配
        function adjustForSmallScreen() {
            // 减小间距和字体大小
            const cards = document.querySelectorAll('.welcome-card, .quick-action-card, .stat-card-mini, .training-record-card');
            cards.forEach(card => {
                card.style.padding = '12px';
            });
            
            // 调整图标大小
            const icons = document.querySelectorAll('.quick-action-icon');
            icons.forEach(icon => {
                icon.style.width = '40px';
                icon.style.height = '40px';
            });
            
            // 调整文本大小
            const headings = document.querySelectorAll('h4');
            headings.forEach(heading => {
                heading.style.fontSize = '14px';
            });
            
            // 更新ARIA标签
            updateARIAForSmallScreen();
        }
        
        // 中等屏幕适配
        function adjustForMediumScreen() {
            // 恢复默认样式
            const cards = document.querySelectorAll('.welcome-card, .quick-action-card, .stat-card-mini, .training-record-card');
            cards.forEach(card => {
                card.style.padding = '16px';
            });
            
            // 恢复图标大小
            const icons = document.querySelectorAll('.quick-action-icon');
            icons.forEach(icon => {
                icon.style.width = '48px';
                icon.style.height = '48px';
            });
            
            // 恢复文本大小
            const headings = document.querySelectorAll('h4');
            headings.forEach(heading => {
                heading.style.fontSize = '16px';
            });
            
            // 更新ARIA标签
            updateARIAForMediumScreen();
        }
        
        // 大屏幕适配
        function adjustForLargeScreen() {
            // 增加间距和字体大小
            const cards = document.querySelectorAll('.welcome-card, .quick-action-card, .stat-card-mini, .training-record-card');
            cards.forEach(card => {
                card.style.padding = '20px';
            });
            
            // 增大图标大小
            const icons = document.querySelectorAll('.quick-action-icon');
            icons.forEach(icon => {
                icon.style.width = '56px';
                icon.style.height = '56px';
            });
            
            // 增大文本大小
            const headings = document.querySelectorAll('h4');
            headings.forEach(heading => {
                heading.style.fontSize = '18px';
            });
            
            // 更新ARIA标签
            updateARIAForLargeScreen();
        }
        
        // 处理方向变化
        function handleOrientationChange() {
            setTimeout(() => {
                detectDeviceType();
                
                // 检测是否为横屏
                const isLandscape = window.innerWidth > window.innerHeight;
                
                if (isLandscape) {
                    document.body.classList.add('landscape-mode');
                    adjustForLandscapeMode();
                } else {
                    document.body.classList.remove('landscape-mode');
                    adjustForPortraitMode();
                }
                
                // 通知屏幕阅读器方向变化
                announceOrientationChange(isLandscape);
            }, 100);
        }
        
        // 处理窗口大小变化
        function handleResize() {
            clearTimeout(window.resizeTimer);
            window.resizeTimer = setTimeout(() => {
                detectDeviceType();
            }, 250);
        }
        
        // 横屏模式适配
        function adjustForLandscapeMode() {
            const phoneFrame = document.querySelector('.phone-frame');
            const contentArea = document.querySelector('.content-area');
            
            // 减小垂直间距
            phoneFrame.style.maxHeight = '100vh';
            contentArea.style.padding = '12px 16px';
            
            // 调整卡片间距
            const sections = document.querySelectorAll('.mb-8, .mb-6');
            sections.forEach(section => {
                const currentMargin = parseInt(window.getComputedStyle(section).marginBottom);
                section.style.marginBottom = `${Math.floor(currentMargin * 0.6)}px`;
            });
            
            // 调整文本大小
            const headings = document.querySelectorAll('.quick-action-content h4');
            headings.forEach(heading => {
                heading.style.fontSize = '14px';
            });
            
            const paragraphs = document.querySelectorAll('.quick-action-content p');
            paragraphs.forEach(paragraph => {
                paragraph.style.fontSize = '11px';
            });
        }
        
        // 竖屏模式适配
        function adjustForPortraitMode() {
            const phoneFrame = document.querySelector('.phone-frame');
            const contentArea = document.querySelector('.content-area');
            
            // 恢复垂直间距
            phoneFrame.style.maxHeight = '';
            contentArea.style.padding = '';
            
            // 恢复卡片间距
            const sections = document.querySelectorAll('.mb-8, .mb-6');
            sections.forEach(section => {
                section.style.marginBottom = '';
            });
            
            // 恢复文本大小
            const headings = document.querySelectorAll('.quick-action-content h4');
            headings.forEach(heading => {
                heading.style.fontSize = '';
            });
            
            const paragraphs = document.querySelectorAll('.quick-action-content p');
            paragraphs.forEach(paragraph => {
                paragraph.style.fontSize = '';
            });
        }
        
        // 检测触摸设备
        function detectTouchDevice() {
            const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0 || navigator.msMaxTouchPoints > 0;
            
            if (isTouchDevice) {
                document.body.classList.add('touch-device');
                adjustForTouchDevice();
            } else {
                document.body.classList.add('non-touch-device');
                adjustForNonTouchDevice();
            }
        }
        
        // 触摸设备适配
        function adjustForTouchDevice() {
            // 增大触摸目标
            const touchTargets = document.querySelectorAll('.action-button, .quick-action-card, .stat-card-mini, .training-record-card');
            touchTargets.forEach(target => {
                target.style.minHeight = '48px';
                target.style.minWidth = '48px';
            });
            
            // 增大导航项
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                item.style.minHeight = '48px';
                item.style.padding = '12px';
            });
            
            // 增大设置按钮
            const settingsButton = document.querySelector('.settings-button');
            if (settingsButton) {
                settingsButton.style.minWidth = '48px';
                settingsButton.style.minHeight = '48px';
            }
            
            // 添加触摸反馈
            addTouchFeedback();
        }
        
        // 非触摸设备适配
        function adjustForNonTouchDevice() {
            // 恢复默认大小
            const touchTargets = document.querySelectorAll('.action-button, .quick-action-card, .stat-card-mini, .training-record-card');
            touchTargets.forEach(target => {
                target.style.minHeight = '';
                target.style.minWidth = '';
            });
            
            // 恢复导航项
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                item.style.minHeight = '';
                item.style.padding = '';
            });
            
            // 恢复设置按钮
            const settingsButton = document.querySelector('.settings-button');
            if (settingsButton) {
                settingsButton.style.minWidth = '';
                settingsButton.style.minHeight = '';
            }
        }
        
        // 添加触摸反馈
        function addTouchFeedback() {
            const touchElements = document.querySelectorAll('.action-button, .quick-action-card, .stat-card-mini, .training-record-card');
            
            touchElements.forEach(element => {
                // 移除悬停效果
                element.addEventListener('touchstart', function() {
                    this.style.transform = 'scale(0.98)';
                    this.style.opacity = '0.8';
                }, { passive: true });
                
                element.addEventListener('touchend', function() {
                    this.style.transform = '';
                    this.style.opacity = '';
                }, { passive: true });
            });
        }
        
        // 检测高分辨率屏幕
        function detectHighResolutionScreen() {
            const isHighRes = window.matchMedia('(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)').matches;
            
            if (isHighRes) {
                document.body.classList.add('high-resolution');
                adjustForHighResolution();
            }
        }
        
        // 高分辨率屏幕适配
        function adjustForHighResolution() {
            // 优化图标渲染
            const icons = document.querySelectorAll('.icon');
            icons.forEach(icon => {
                icon.style.imageRendering = '-webkit-optimize-contrast';
                icon.style.imageRendering = 'crisp-edges';
            });
            
            // 增强状态指示器
            const statusIndicators = document.querySelectorAll('.status-indicator.active');
            statusIndicators.forEach(indicator => {
                indicator.style.boxShadow = '0 0 15px rgba(16, 185, 129, 0.8)';
            });
        }
        
        // 检测用户偏好设置
        function detectUserPreferences() {
            // 检测减少动画偏好
            if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.body.classList.add('reduce-motion');
                adjustForReducedMotion();
            }
            
            // 检测高对比度偏好
            if (window.matchMedia('(prefers-contrast: high)').matches) {
                document.body.classList.add('high-contrast');
                adjustForHighContrast();
            }
            
            // 检测深色模式偏好
            if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.body.classList.add('dark-mode');
                adjustForDarkMode();
            }
        }
        
        // 减少动画适配
        function adjustForReducedMotion() {
            // 禁用所有动画
            const style = document.createElement('style');
            style.innerHTML = `
                * {
                    animation-duration: 0.01ms !important;
                    animation-iteration-count: 1 !important;
                    transition-duration: 0.01ms !important;
                    scroll-behavior: auto !important;
                }
                
                .focus-indicator:focus {
                    animation: none !important;
                }
                
                .status-indicator.active {
                    animation: none !important;
                }
            `;
            document.head.appendChild(style);
        }
        
        // 高对比度适配
        function adjustForHighContrast() {
            // 根据屏幕大小调整边框
            const width = window.innerWidth;
            const isSmallScreen = width <= 320;
            const isLargeScreen = width >= 768;
            
            const phoneFrame = document.querySelector('.phone-frame');
            const cards = document.querySelectorAll('.welcome-card, .quick-action-card, .stat-card-mini, .training-record-card');
            
            if (isSmallScreen) {
                phoneFrame.style.border = '2px solid #ffffff';
                cards.forEach(card => {
                    card.style.border = '1px solid #ffffff';
                });
            } else if (isLargeScreen) {
                phoneFrame.style.border = '3px solid #ffffff';
                cards.forEach(card => {
                    card.style.border = '2px solid #ffffff';
                });
            }
        }
        
        // 深色模式适配
        function adjustForDarkMode() {
            // 根据屏幕大小调整背景透明度
            const width = window.innerWidth;
            const isSmallScreen = width <= 320;
            const isLargeScreen = width >= 768;
            
            const cards = document.querySelectorAll('.welcome-card, .quick-action-card, .stat-card-mini, .training-record-card');
            
            if (isSmallScreen) {
                cards.forEach(card => {
                    card.style.backgroundColor = 'rgba(15, 23, 42, 0.95)';
                });
            } else if (isLargeScreen) {
                cards.forEach(card => {
                    card.style.backgroundColor = 'rgba(15, 23, 42, 0.9)';
                });
            }
        }
        
        // 初始化响应式焦点管理
        function initializeResponsiveFocusManagement() {
            // 根据设备类型调整焦点样式
            const width = window.innerWidth;
            const isLargeScreen = width >= 768;
            
            if (isLargeScreen) {
                // 大屏幕上增强焦点指示器
                const style = document.createElement('style');
                style.innerHTML = `
                    .focusable:focus {
                        outline-width: 3px;
                        outline-offset: 3px;
                    }
                    
                    .focus-highlight:focus {
                        transform: scale(1.03);
                        box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.4);
                    }
                `;
                document.head.appendChild(style);
            }
        }
        
        // 初始化响应式ARIA
        function initializeResponsiveARIA() {
            // 根据屏幕大小更新ARIA标签
            updateARIAForScreenSize();
        }
        
        // 更新小屏幕ARIA标签
        function updateARIAForSmallScreen() {
            // 更新欢迎卡片ARIA标签
            const welcomeCard = document.querySelector('.welcome-card');
            if (welcomeCard) {
                welcomeCard.setAttribute('aria-label', '欢迎卡片 - 紧凑视图');
            }
            
            // 更新快速操作区域ARIA标签
            const quickActions = document.querySelector('.mb-8.focus-container');
            if (quickActions) {
                quickActions.setAttribute('aria-label', '快速操作区域 - 紧凑视图');
            }
            
            // 更新训练概览区域ARIA标签
            const trainingOverview = document.querySelector('.mb-6.focus-container');
            if (trainingOverview) {
                trainingOverview.setAttribute('aria-label', '训练概览区域 - 紧凑视图');
            }
            
            // 更新最近训练区域ARIA标签
            const recentTraining = document.querySelector('.mb-6.focus-container:last-of-type');
            if (recentTraining) {
                recentTraining.setAttribute('aria-label', '最近训练区域 - 紧凑视图');
            }
        }
        
        // 更新中等屏幕ARIA标签
        function updateARIAForMediumScreen() {
            // 更新欢迎卡片ARIA标签
            const welcomeCard = document.querySelector('.welcome-card');
            if (welcomeCard) {
                welcomeCard.setAttribute('aria-label', '欢迎卡片 - 标准视图');
            }
            
            // 更新快速操作区域ARIA标签
            const quickActions = document.querySelector('.mb-8.focus-container');
            if (quickActions) {
                quickActions.setAttribute('aria-label', '快速操作区域 - 标准视图');
            }
            
            // 更新训练概览区域ARIA标签
            const trainingOverview = document.querySelector('.mb-6.focus-container');
            if (trainingOverview) {
                trainingOverview.setAttribute('aria-label', '训练概览区域 - 标准视图');
            }
            
            // 更新最近训练区域ARIA标签
            const recentTraining = document.querySelector('.mb-6.focus-container:last-of-type');
            if (recentTraining) {
                recentTraining.setAttribute('aria-label', '最近训练区域 - 标准视图');
            }
        }
        
        // 更新大屏幕ARIA标签
        function updateARIAForLargeScreen() {
            // 更新欢迎卡片ARIA标签
            const welcomeCard = document.querySelector('.welcome-card');
            if (welcomeCard) {
                welcomeCard.setAttribute('aria-label', '欢迎卡片 - 扩展视图');
            }
            
            // 更新快速操作区域ARIA标签
            const quickActions = document.querySelector('.mb-8.focus-container');
            if (quickActions) {
                quickActions.setAttribute('aria-label', '快速操作区域 - 扩展视图');
            }
            
            // 更新训练概览区域ARIA标签
            const trainingOverview = document.querySelector('.mb-6.focus-container');
            if (trainingOverview) {
                trainingOverview.setAttribute('aria-label', '训练概览区域 - 扩展视图');
            }
            
            // 更新最近训练区域ARIA标签
            const recentTraining = document.querySelector('.mb-6.focus-container:last-of-type');
            if (recentTraining) {
                recentTraining.setAttribute('aria-label', '最近训练区域 - 扩展视图');
            }
        }
        
        // 根据屏幕大小更新ARIA标签
        function updateARIAForScreenSize() {
            const width = window.innerWidth;
            
            if (width <= 320) {
                updateARIAForSmallScreen();
            } else if (width < 768) {
                updateARIAForMediumScreen();
            } else {
                updateARIAForLargeScreen();
            }
        }
        
        // 通知屏幕阅读器方向变化
        function announceOrientationChange(isLandscape) {
            const announcement = document.createElement('div');
            announcement.setAttribute('aria-live', 'polite');
            announcement.setAttribute('aria-atomic', 'true');
            announcement.className = 'sr-only';
            announcement.textContent = isLandscape ? '屏幕已切换到横屏模式' : '屏幕已切换到竖屏模式';
            
            document.body.appendChild(announcement);
            
            // 一段时间后移除通知
            setTimeout(() => {
                document.body.removeChild(announcement);
            }, 1000);
        }
        
        // 焦点管理初始化
        function initializeFocusManagement() {
            // 为所有可聚焦元素添加焦点指示器类
            const focusableElements = document.querySelectorAll(
                'a, button, input, select, textarea, [tabindex]:not([tabindex="-1"])'
            );
            
            focusableElements.forEach(element => {
                // 跳过已有焦点类的元素
                if (element.classList.contains('focusable') || 
                    element.classList.contains('visual-focus') ||
                    element.classList.contains('focus-indicator')) {
                    return;
                }
                
                // 根据元素类型添加适当的焦点类
                if (element.tagName === 'BUTTON' || element.tagName === 'A') {
                    element.classList.add('focus-highlight');
                } else {
                    element.classList.add('focusable');
                }
                
                // 添加键盘导航提示
                addKeyboardHint(element);
            });
            
            // 添加键盘导航事件监听
            document.addEventListener('keydown', handleKeyboardNavigation);
            
            // 初始化焦点陷阱
            initializeFocusTraps();
            
            // 初始化跳转到主内容链接
            initializeSkipLinks();
        }
        
        // 添加键盘导航提示
        function addKeyboardHint(element) {
            // 为按钮和链接添加键盘提示
            if (element.tagName === 'BUTTON' || element.tagName === 'A') {
                const hint = document.createElement('span');
                hint.className = 'keyboard-hint';
                hint.textContent = element.tagName === 'BUTTON' ? '空格或回车激活' : '回车访问';
                element.style.position = 'relative';
                element.appendChild(hint);
                
                // 显示/隐藏提示
                element.addEventListener('focus', () => {
                    hint.classList.add('visible');
                });
                
                element.addEventListener('blur', () => {
                    hint.classList.remove('visible');
                });
            }
        }
        
        // 处理键盘导航
        function handleKeyboardNavigation(e) {
            // Tab键导航增强
            if (e.key === 'Tab') {
                // 添加自定义Tab键处理逻辑
                document.body.classList.add('keyboard-navigation');
                
                // 移除焦点指示器，避免多个指示器同时显示
                setTimeout(() => {
                    document.body.classList.remove('keyboard-navigation');
                }, 100);
            }
            
            // 方向键导航
            if (e.key === 'ArrowDown' || e.key === 'ArrowUp' || 
                e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
                // 在特定区域内使用方向键导航
                const currentElement = document.activeElement;
                const container = currentElement.closest('.focus-container');
                
                if (container) {
                    handleArrowKeyNavigation(e, container);
                }
            }
            
            // Escape键关闭面板
            if (e.key === 'Escape') {
                const slidePanel = document.querySelector('.slide-panel.active');
                if (slidePanel) {
                    closePanel();
                }
            }
            
            // Enter键和空格键处理
            if (e.key === 'Enter' || e.key === ' ') {
                const currentElement = document.activeElement;
                
                // 处理非按钮元素的激活
                if (currentElement.classList.contains('focusable') && 
                    currentElement.tagName !== 'BUTTON' && 
                    currentElement.tagName !== 'INPUT' && 
                    currentElement.tagName !== 'TEXTAREA') {
                    e.preventDefault();
                    currentElement.click();
                }
            }
        }
        
        // 方向键导航处理
        function handleArrowKeyNavigation(e, container) {
            e.preventDefault();
            
            const focusableElements = container.querySelectorAll(
                '.focusable, .focus-highlight, button, a, input, select, textarea'
            );
            
            const currentIndex = Array.from(focusableElements).indexOf(document.activeElement);
            
            let nextIndex;
            
            switch (e.key) {
                case 'ArrowDown':
                case 'ArrowRight':
                    nextIndex = (currentIndex + 1) % focusableElements.length;
                    break;
                case 'ArrowUp':
                case 'ArrowLeft':
                    nextIndex = currentIndex <= 0 ? focusableElements.length - 1 : currentIndex - 1;
                    break;
            }
            
            if (nextIndex !== undefined && focusableElements[nextIndex]) {
                focusableElements[nextIndex].focus();
            }
        }
        
        // 初始化焦点陷阱
        function initializeFocusTraps() {
            const modals = document.querySelectorAll('.modal, .slide-panel');
            
            modals.forEach(modal => {
                modal.classList.add('focus-trap');
                
                // 当模态框打开时，设置焦点陷阱
                const observer = new MutationObserver((mutations) => {
                    mutations.forEach((mutation) => {
                        if (mutation.type === 'attributes' && 
                            mutation.attributeName === 'class') {
                            if (modal.classList.contains('active')) {
                                trapFocus(modal);
                            } else {
                                removeFocusTrap(modal);
                            }
                        }
                    });
                });
                
                observer.observe(modal, { attributes: true });
            });
        }
        
        // 设置焦点陷阱
        function trapFocus(container) {
            const focusableElements = container.querySelectorAll(
                'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
            );
            
            if (focusableElements.length === 0) return;
            
            const firstElement = focusableElements[0];
            const lastElement = focusableElements[focusableElements.length - 1];
            
            // 监听Tab键，确保焦点在容器内循环
            container.addEventListener('keydown', function trapTabKey(e) {
                if (e.key === 'Tab') {
                    if (e.shiftKey) {
                        if (document.activeElement === firstElement) {
                            e.preventDefault();
                            lastElement.focus();
                        }
                    } else {
                        if (document.activeElement === lastElement) {
                            e.preventDefault();
                            firstElement.focus();
                        }
                    }
                }
                
                // ESC键关闭模态框
                if (e.key === 'Escape') {
                    closePanel();
                }
            });
            
            // 初始焦点设置
            setTimeout(() => {
                firstElement.focus();
            }, 100);
        }
        
        // 移除焦点陷阱
        function removeFocusTrap(container) {
            // 这里可以移除事件监听器，但为了简化，我们使用事件委托
            // 实际应用中可能需要更精细的事件管理
        }
        
        // 初始化跳转到主内容的链接
        function initializeSkipLinks() {
            // 检查是否已有跳转链接
            if (document.querySelector('.skip-to-main')) return;
            
            const skipLink = document.createElement('a');
            skipLink.href = '#main';
            skipLink.className = 'skip-to-main';
            skipLink.textContent = '跳转到主内容';
            
            // 确保主内容区域有id
            const mainContent = document.querySelector('main') || document.querySelector('#main');
            if (mainContent && !mainContent.id) {
                mainContent.id = 'main';
            }
            
            // 将跳转链接添加到页面顶部
            document.body.insertBefore(skipLink, document.body.firstChild);
        }
        
        // 为动态添加的内容初始化焦点管理
        function initializeDynamicContent(container) {
            if (!container) return;
            
            // 为新内容中的可聚焦元素添加焦点类
            const focusableElements = container.querySelectorAll(
                'a, button, input, select, textarea, [tabindex]:not([tabindex="-1"])'
            );
            
            focusableElements.forEach(element => {
                if (!element.classList.contains('focusable') && 
                    !element.classList.contains('visual-focus') &&
                    !element.classList.contains('focus-indicator')) {
                    
                    if (element.tagName === 'BUTTON' || element.tagName === 'A') {
                        element.classList.add('focus-highlight');
                    } else {
                        element.classList.add('focusable');
                    }
                    
                    addKeyboardHint(element);
                }
            });
        }
        
        // 修改openPanel函数，为新内容初始化焦点管理
        const originalOpenPanel = openPanel;
        openPanel = function(content) {
            originalOpenPanel(content);
            
            // 等待面板内容添加到DOM后初始化焦点管理
            setTimeout(() => {
                const slidePanel = document.querySelector('.slide-panel');
                if (slidePanel) {
                    initializeDynamicContent(slidePanel);
                }
            }, 100);
        };
        
        // 加载覆盖层控制函数
        function showLoading(text = '加载中...') {
            const loadingOverlay = document.getElementById('loadingOverlay');
            const loadingText = document.getElementById('loadingText');
            loadingText.textContent = text;
            loadingOverlay.classList.add('active');
        }
        
        function hideLoading() {
            const loadingOverlay = document.getElementById('loadingOverlay');
            loadingOverlay.classList.remove('active');
        }
        
        // 页面切换时显示加载动画
        function switchPageWithLoading(pageName) {
            showLoading('切换页面中...');
            setTimeout(() => {
                switchPage(pageName);
                hideLoading();
            }, 500);
        }
        
        // 快速训练带加载动画
        function startQuickTrainingWithLoading() {
            showLoading('准备训练环境...');
            setTimeout(() => {
                hideLoading();
                // 切换到监控页面并开始训练
                switchPage('monitor');
                setTimeout(() => {
                    toggleMonitoring();
                }, 500);
            }, 1500);
        }
        
        // 查看历史记录带加载动画
        function viewHistoryWithLoading() {
            showLoading('加载历史记录...');
            setTimeout(() => {
                hideLoading();
                // 这里可以添加显示历史记录的逻辑
                alert('历史记录功能正在开发中...');
            }, 1000);
        }
    </script>
    
    <!-- 加载覆盖层 -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text" id="loadingText">加载中...</div>
    </div>
</body>
</html>